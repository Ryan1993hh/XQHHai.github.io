<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÁæéÂ•ΩÊó∂ÂÖâ - Âêë&Ê∂µÁöÑÂπ∏Á¶èËä±Âõ≠</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* ÂØºËà™Ê†èÊ†∑Âºè */
        .navbar {
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #ff9a9e;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            gap: 30px;
        }

        .nav-link {
            color: #333;
            text-decoration: none;
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .nav-link:hover {
            color: #ff9a9e;
        }

        /* Ê†áÈ¢òÊ†∑Âºè */
        .title-container {
            text-align: center;
            margin-top: 100px;
            position: relative;
            padding: 20px;
        }

        .title {
            font-size: 36px;
            color: #ff6b6b;
            position: relative;
            display: inline-block;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .title-line {
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #ff6b6b, #4facfe);
            transform: scaleX(0);
            transform-origin: left;
            animation: lineMove 3s infinite alternate;
        }

        @keyframes lineMove {
            0% {
                transform: scaleX(0);
                transform-origin: left;
            }
            100% {
                transform: scaleX(1);
                transform-origin: right;
            }
        }

        /* Êó∂Èó¥ÊòæÁ§∫Ê†∑Âºè */
        .time-container {
            text-align: center;
            margin: 20px auto;
            width: fit-content;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.8);
            display: flex;
            flex-direction: column;
            gap: 8px;
            position: relative;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .time-container:hover {
            transform: scale(1.02);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
        }

        .time-container:active {
            transform: scale(0.98);
        }

        .time-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(circle at 20% 20%, rgba(255, 107, 107, 0.05), transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 107, 107, 0.05), transparent 50%);
            border-radius: 25px;
            z-index: -1;
        }

        .current-time {
            font-size: 24px;
            color: #ff6b6b;
            font-weight: 500;
            letter-spacing: 1px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.05);
            white-space: nowrap;
            position: relative;
        }

        .current-time::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, #ff6b6b, transparent);
            opacity: 0.3;
        }

        /* Ê∏©È¶®ËØùËØ≠Ê†∑Âºè */
        .sweet-messages {
            text-align: center;
            min-height: 28px;
            margin-top: 0;
            position: relative;
            width: 100%;
        }

        .sweet-message {
            font-size: 16px;
            color: #ff6b6b;
            margin: 0;
            opacity: 0;
            transform: translateY(5px);
            transition: all 1.2s cubic-bezier(0.2, 0.8, 0.2, 1);
            position: absolute;
            width: 100%;
            left: 0;
            top: 0;
            font-style: italic;
            white-space: nowrap;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
            font-weight: 500;
        }

        .sweet-message.active {
            opacity: 1;
            transform: translateY(0);
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
                transform: translateY(5px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            0% {
                opacity: 1;
                transform: translateY(0);
            }
            100% {
                opacity: 0;
                transform: translateY(5px);
            }
        }

        /* ‰∏ªÂÜÖÂÆπÂå∫Âüü */
        .main-content {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 30px auto;
            padding: 15px;
            gap: 20px;
        }

        /* ‰øÆÊîπ‰∏äÈÉ®ÂàÜÂ∏ÉÂ±Ä */
        .top-section {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            height: calc(80vh - 100px);
            min-height: 600px;
        }

        /* ‰øÆÊîπ‰∏ãÈÉ®ÂàÜÂ∏ÉÂ±Ä */
        .bottom-section {
            display: flex;
            justify-content: center;
            padding: 0;
            margin-top: 20px;
            height: calc(90vh - 100px);
            min-height: 800px;
        }

        /* ‰æßËæπÂÆπÂô®Ê†∑Âºè */
        .side-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
            min-width: 0;
            height: calc(80vh - 100px); /* Â¢ûÂä†È´òÂ∫¶ */
            min-height: 600px; /* ËÆæÁΩÆÊúÄÂ∞èÈ´òÂ∫¶ */
        }

        /* Âç°ÁâáÂü∫Á°ÄÊ†∑Âºè */
        .card {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            position: relative;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden; /* Á°Æ‰øùÂÜÖÂÆπ‰∏ç‰ºöÊ∫¢Âá∫ */
        }

        .card-title {
            font-size: 18px;
            color: #ff6b6b;
            margin-bottom: 15px;
            text-align: center;
            font-weight: 500;
            letter-spacing: 1px;
        }

        /* Ê∑ªÂä†ÊåâÈíÆÊ†∑Âºè */
        .add-button {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: #ff6b6b;
            font-size: 20px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .add-button:hover {
            transform: scale(1.1) rotate(90deg);
            background: white;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        /* Êñ∞ÁöÑÂõõË±°ÈôêÊ†∑Âºè */
        .quadrant-container {
            width: 100%;
            max-width: 1200px;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 25px;
            background: linear-gradient(135deg, #f6f9fc, #e9f2f9);
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            height: 100%;
            position: relative;
            overflow: hidden;
        }

        .quadrant {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            position: relative;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid rgba(255, 255, 255, 0.8);
            overflow-y: auto;
            height: 100%;
            display: flex;
            flex-direction: column;
            backdrop-filter: blur(10px);
        }

        .quadrant:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .quadrant-title {
            color: #2c3e50;
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            letter-spacing: 1px;
            position: relative;
            padding-bottom: 12px;
            flex-shrink: 0;
        }

        .quadrant-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #3498db, #2980b9);
            border-radius: 3px;
        }

        .task-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            min-height: 0;
        }

        .task-list::-webkit-scrollbar {
            width: 8px;
        }

        .task-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.03);
            border-radius: 4px;
        }

        .task-list::-webkit-scrollbar-thumb {
            background: rgba(52, 152, 219, 0.3);
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .task-list::-webkit-scrollbar-thumb:hover {
            background: rgba(52, 152, 219, 0.5);
        }

        /* Ê∑ªÂä†‰ªªÂä°È°πÂä®ÁîªÊ†∑Âºè */
        .task-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center; /* Êîπ‰∏∫Â±Ö‰∏≠ÂØπÈΩê */
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
            transform-origin: center;
            animation: taskAppear 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform, opacity;
        }

        @keyframes taskAppear {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes taskMove {
            0% {
                transform: translateY(0);
                opacity: 1;
            }
            50% {
                opacity: 0.8;
            }
            100% {
                transform: translateY(var(--move-distance));
                opacity: 1;
            }
        }

        .task-item.moving {
            animation: taskMove 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1;
            pointer-events: none;
        }

        .task-item.completed {
            background: rgba(52, 152, 219, 0.05);
            border-left: 3px solid #3498db;
        }

        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: rgba(52, 152, 219, 0.3);
        }

        .task-item.dragging {
            opacity: 0.5;
            background: rgba(52, 152, 219, 0.1);
        }

        .quadrant.drag-over {
            border-color: #3498db;
            background-color: rgba(52, 152, 219, 0.05);
        }

        .task-content {
            flex: 1;
            padding-right: 15px;
        }

        .task-header {
            display: flex;
            align-items: center;
            margin-bottom: 0; /* ÁßªÈô§Â∫ïÈÉ®Èó¥Ë∑ù */
        }

        .task-title {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 600;
            margin-right: 10px; /* Ê∑ªÂä†Âè≥‰æßÈó¥Ë∑ù */
            white-space: nowrap; /* Èò≤Ê≠¢Ê†áÈ¢òÊç¢Ë°å */
        }

        .task-description {
            font-size: 14px;
            color: #7f8c8d;
            line-height: 1.5;
            flex: 1;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap; /* ‰øùÊåÅÂú®‰∏ÄË°å */
        }

        .task-actions {
            display: flex;
            gap: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .task-item:hover .task-actions {
            opacity: 1;
        }

        .task-button {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #7f8c8d;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .task-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .task-button.edit {
            color: #3498db;
        }

        .task-button.delete {
            color: #e74c3c;
        }

        .quadrant-add-button {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 36px;
            height: 36px;
            background: #3498db;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-size: 20px;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
            z-index: 10;
        }

        .quadrant-add-button:hover {
            transform: scale(1.1) rotate(90deg);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .quadrant-add-button:active {
            transform: scale(0.95);
        }

        .memory-container, .countdown-container {
            overflow-y: auto;
        }

        .memory-list, .countdown-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
            padding-right: 5px;
        }

        .memory-list::-webkit-scrollbar,
        .countdown-list::-webkit-scrollbar,
        .future-list::-webkit-scrollbar {
            width: 6px;
        }

        .memory-list::-webkit-scrollbar-track,
        .countdown-list::-webkit-scrollbar-track,
        .future-list::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 3px;
        }

        .memory-list::-webkit-scrollbar-thumb,
        .countdown-list::-webkit-scrollbar-thumb,
        .future-list::-webkit-scrollbar-thumb {
            background: rgba(0, 0, 0, 0.1);
            border-radius: 3px;
        }

        .memory-list::-webkit-scrollbar-thumb:hover,
        .countdown-list::-webkit-scrollbar-thumb:hover,
        .future-list::-webkit-scrollbar-thumb:hover {
            background: rgba(0, 0, 0, 0.2);
        }

        .future-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .future-item {
            background: white;
            border-radius: 12px;
            padding: 12px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }

        .future-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .future-item-content {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .future-item-icon {
            font-size: 20px;
            color: #ff6b6b;
        }

        .future-item-text {
            font-size: 14px;
            color: #333;
        }

        .future-item-actions {
            display: flex;
            gap: 8px;
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }

        .future-item:hover .future-item-actions {
            opacity: 1;
        }

        /* Êó∂Èó¥ËÆ°ÁÆóÊ†∑Âºè */
        .time-duration {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
            font-style: italic;
            position: relative;
            top: -5px; /* ÂæÆË∞ÉÊó∂Èó¥Â∑ÆÊòæÁ§∫‰ΩçÁΩÆ */
        }

        .time-duration.memory {
            color: #ff6b6b;
        }

        .time-duration.countdown {
            color: #4facfe;
        }

        /* ‰∫ã‰ª∂È°πÊ†∑Âºè */
        .event-item {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            position: relative;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .event-content {
            flex: 1;
            padding-right: 60px;
        }

        .event-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .event-title {
            font-size: 16px;
            color: #ff6b6b;
            font-weight: 600;
            margin: 0;
        }

        .event-time {
            font-size: 14px;
            color: #666;
            font-style: italic;
            margin: 0;
        }

        .event-description {
            font-size: 14px;
            color: #666;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .time-duration {
            font-size: 12px;
            color: #666;
            font-style: italic;
            margin: 0;
            display: inline-flex;
            align-items: center;
        }

        .time-duration.memory {
            color: #ff6b6b;
        }

        .time-duration.countdown {
            color: #4facfe;
        }

        /* Áªü‰∏Ä‰∫ã‰ª∂Êìç‰ΩúÊåâÈíÆÊ†∑Âºè */
        .event-actions, .task-actions, .wish-item-actions {
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 2;
        }

        .event-item:hover .event-actions,
        .task-item:hover .task-actions,
        .wish-item:hover .wish-item-actions {
            opacity: 1;
        }

        .event-button, .task-button {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: none;
            background: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 0;
        }

        .event-button:hover, .task-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .event-button.edit, .task-button.edit {
            color: #3498db;
        }

        .event-button.delete, .task-button.delete {
            color: #e74c3c;
        }

        /* Êõ¥Êñ∞ÂõæÊ†áSVG */
        .edit-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234facfe"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>');
            width: 16px;
            height: 16px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .delete-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>');
            width: 16px;
            height: 16px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .pin-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>');
            width: 16px;
            height: 16px;
            opacity: 0.8;
            transition: opacity 0.3s ease;
        }

        .event-button:hover .edit-icon,
        .event-button:hover .delete-icon,
        .task-button:hover .edit-icon,
        .task-button:hover .delete-icon {
            opacity: 1;
        }

        /* ‰øÆÊîπ‰ªªÂä°È°πÊ†∑Âºè */
        .task-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .task-content {
            flex: 1;
            padding-right: 60px;
        }

        .task-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }

        .task-title {
            font-size: 16px;
            color: #2c3e50;
            font-weight: 600;
        }

        .task-description {
            font-size: 14px;
            color: #7f8c8d;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ‰øÆÊîπÊÑøÊúõÈ°πÊ†∑Âºè */
        .wish-item {
            padding: 12px 15px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            position: relative;
            min-height: 60px; /* Á°Æ‰øùÂç°ÁâáÊúâË∂≥Â§üÁöÑÈ´òÂ∫¶ */
        }

        .wish-item-content {
            flex: 1;
            padding-right: 100px; /* Â¢ûÂä†Âè≥‰æßÂÜÖËæπË∑ùÔºå‰∏∫Êìç‰ΩúÊåâÈíÆÁïôÂá∫Êõ¥Â§öÁ©∫Èó¥ */
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative; /* Ê∑ªÂä†Áõ∏ÂØπÂÆö‰Ωç */
        }

        .wish-item-icon {
            font-size: 20px;
            color: #ff6b6b;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 8px;
        }

        .wish-item-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }

        .wish-item-title {
            font-size: 14px;
            color: #333;
            margin: 0;
            font-weight: 500;
            white-space: nowrap;
        }

        .wish-item-description {
            font-size: 12px;
            color: #666;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.4; /* Ë∞ÉÊï¥Ë°åÈ´òÔºå‰ΩøÊñáÊú¨ÂûÇÁõ¥Â±Ö‰∏≠ */
        }

        /* ‰øÆÊîπÊÑøÊúõÈ°πÊìç‰ΩúÊåâÈíÆ‰ΩçÁΩÆ */
        .wish-item-actions {
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(calc(-50% + 15px)); /* Âêë‰∏ãÂπ≥Áßª15px */
            z-index: 2;
        }

        .wish-item:hover .wish-item-actions {
            opacity: 1;
        }

        .wish-item-tag {
            position: relative;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.2);
            margin-right: 5px;
            display: inline-block;
            max-width: 80px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .wish-item-tags {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 200px;
            justify-content: flex-end;
            z-index: 1;
        }

        .wish-item-tags .wish-item-tag:nth-child(n+4) {
            display: none;
        }

        .wish-item-tags .wish-item-tag:last-child {
            margin-right: 0;
        }

        /* Ê†áÁ≠æÊ†∑Âºè‰ºòÂåñ */
        .form-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            position: relative;
        }

        .form-tag {
            padding: 6px 12px;
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            border-radius: 15px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 107, 107, 0.2);
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
        }

        .form-tag .remove-tag {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.2);
            margin-left: 5px;
            font-size: 12px;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .form-tag:hover .remove-tag {
            opacity: 1;
        }

        .form-tag .remove-tag:hover {
            background: rgba(255, 107, 107, 0.4);
        }

        .add-tag-input {
            padding: 6px 12px;
            border: 1px dashed rgba(255, 107, 107, 0.3);
            border-radius: 15px;
            font-size: 13px;
            color: #666;
            background: transparent;
            width: 100px;
            transition: all 0.3s ease;
        }

        .add-tag-input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        /* ÂõæÊ†áÊ†∑Âºè */
        .icon {
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .event-button:hover .icon {
            transform: scale(1.1);
        }

        .edit-icon::before {
            content: '‚úèÔ∏è';
        }

        .delete-icon::before {
            content: 'üóëÔ∏è';
        }

        .pin-icon::before {
            content: 'üìå';
        }

        /* ÂÖ®Â±èÊó∂ÈíüÊ†∑Âºè */
        .fullscreen-clock {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .fullscreen-clock.active {
            display: flex;
        }

        .clock-content {
            color: white;
            text-align: center;
        }

        .clock-time {
            font-size: 72px;
            margin-bottom: 20px;
        }

        .clock-date {
            font-size: 36px;
            opacity: 0.8;
        }

        .close-clock {
            position: absolute;
            top: 20px;
            right: 20px;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }

        /* ËÉåÊôØÂä®Áîª */
        .background-animation {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .floating-element {
            position: absolute;
            width: 20px;
            height: 20px;
            background: rgba(255, 154, 158, 0.3);
            border-radius: 50%;
            animation: float 15s infinite;
        }

        @keyframes float {
            0% {
                transform: translate(0, 0) rotate(0deg);
            }
            25% {
                transform: translate(100px, -50px) rotate(90deg);
            }
            50% {
                transform: translate(0, -100px) rotate(180deg);
            }
            75% {
                transform: translate(-100px, -50px) rotate(270deg);
            }
            100% {
                transform: translate(0, 0) rotate(360deg);
            }
        }

        /* Ê∑ªÂä†Ë°®ÂçïÊ†∑Âºè */
        .add-form {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            display: none;
            min-width: 320px;
            border: 2px solid #ffd6e0;
        }

        .add-form.active {
            display: block;
            animation: formPop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        @keyframes formPop {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 0;
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 1;
            }
        }

        .form-title {
            font-size: 20px;
            color: #ff6b6b;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 600;
            position: relative;
            padding-bottom: 10px;
        }

        .form-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, #ff6b6b, #ffd6e0);
            border-radius: 3px;
        }

        .form-group {
            margin-bottom: 20px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            color: #666;
            font-size: 14px;
            font-weight: 500;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ffd6e0;
            border-radius: 12px;
            font-size: 14px;
            transition: all 0.3s ease;
            background: #fff;
        }

        .form-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.1);
            outline: none;
        }

        .form-group textarea.form-input {
            min-height: 80px;
            resize: vertical;
            line-height: 1.5;
        }

        .form-label .optional {
            font-size: 12px;
            color: #999;
            margin-left: 5px;
            font-weight: normal;
        }

        /* ÂèØÁà±ÁöÑÊó∂Èó¥ÈÄâÊã©Âô®Ê†∑Âºè */
        .cute-date-picker {
            position: relative;
            width: 100%;
        }

        .cute-date-picker input[type="date"] {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ffd6e0;
            border-radius: 12px;
            font-size: 14px;
            color: #666;
            background: #fff;
            cursor: pointer;
            transition: all 0.3s ease;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .cute-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="%23ff6b6b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>') no-repeat center;
            width: 24px;
            height: 24px;
            cursor: pointer;
            filter: drop-shadow(0 2px 4px rgba(255, 107, 107, 0.2));
            transition: all 0.3s ease;
        }

        .cute-date-picker input[type="date"]::-webkit-calendar-picker-indicator:hover {
            transform: scale(1.1);
        }

        .cute-date-picker::before {
            content: 'üìÖ';
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            pointer-events: none;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% {
                transform: translateY(-50%) scale(1);
            }
            50% {
                transform: translateY(-50%) scale(1.1);
            }
        }

        .form-actions {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
        }

        .form-button {
            padding: 10px 25px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .form-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .form-button:hover::before {
            transform: translateX(0);
        }

        .form-button.cancel {
            background: #f8f9fa;
            color: #666;
            border: 2px solid #e9ecef;
        }

        .form-button.submit {
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.2);
        }

        .form-button:hover {
            transform: translateY(-2px);
        }

        .form-button:active {
            transform: translateY(0);
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        /* Âπ∏Á¶èÊú™Êù•Ê®°ÂùóÊ†∑Âºè */
        .future-container {
            flex: 1;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .future-categories {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 15px;
        }

        .future-category {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .future-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .future-category.active {
            background: #ff6b6b;
            color: white;
        }

        .future-category-icon {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .future-category-title {
            font-size: 14px;
            font-weight: 500;
        }

        /* ÊÑøÊúõÊ∏ÖÂçïÊ®°ÂùóÊ†∑Âºè */
        .wish-container {
            flex: 1;
            background: linear-gradient(135deg, #a8edea, #fed6e3);
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            height: calc(80vh - 100px); /* Â¢ûÂä†È´òÂ∫¶ */
            min-height: 600px; /* ËÆæÁΩÆÊúÄÂ∞èÈ´òÂ∫¶ */
        }

        .wish-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
            z-index: 1;
        }

        .wish-header-left {
            display: flex;
            align-items: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .wish-title {
            font-size: 20px;
            color: #ff6b6b;
            font-weight: 600;
            position: relative;
            padding-bottom: 5px;
            z-index: 2;
        }

        .wish-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #ff6b6b, transparent);
        }

        .wish-category-select {
            position: relative;
            width: 150px;
        }

        .wish-category-select select {
            width: 100%;
            padding: 8px 12px;
            border: 2px solid #ff6b6b;
            border-radius: 10px;
            background: white;
            color: #333;
            font-size: 14px;
            cursor: pointer;
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            padding-right: 30px;
        }

        .wish-category-select::after {
            content: '‚ñº';
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #ff6b6b;
            font-size: 12px;
            pointer-events: none;
        }

        .wish-category-select select:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        .wish-category-select select option {
            padding: 8px;
        }

        .wish-add-button {
            position: relative;
            width: 28px;
            height: 28px;
            background: #ff6b6b;
            border-radius: 14px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
            font-size: 16px;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
            z-index: 10;
        }

        .wish-add-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 107, 107, 0.4);
        }

        .wish-add-button:active {
            transform: scale(0.95);
        }

        .wish-add-button::before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border-radius: 17px;
            background: rgba(255, 107, 107, 0.1);
            z-index: -1;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(1.5);
                opacity: 0;
            }
        }

        .wish-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .wish-item {
            background: white;
            border-radius: 12px;
            padding: 12px 15px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: hidden;
        }

        .wish-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: #ff6b6b;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .wish-item:hover::before {
            opacity: 1;
        }

        .wish-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .wish-item-content {
            flex: 1;
            padding-right: 100px; /* Â¢ûÂä†Âè≥‰æßÂÜÖËæπË∑ùÔºå‰∏∫Êìç‰ΩúÊåâÈíÆÁïôÂá∫Êõ¥Â§öÁ©∫Èó¥ */
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative; /* Ê∑ªÂä†Áõ∏ÂØπÂÆö‰Ωç */
        }

        .wish-item-icon {
            font-size: 20px;
            color: #ff6b6b;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 107, 107, 0.1);
            border-radius: 8px;
        }

        .wish-item-text {
            display: flex;
            flex-direction: column;
            gap: 4px;
            flex: 1;
        }

        .wish-item-title {
            font-size: 14px;
            color: #333;
            margin: 0;
            font-weight: 500;
            white-space: nowrap;
        }

        .wish-item-description {
            font-size: 12px;
            color: #666;
            margin: 0;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.4; /* Ë∞ÉÊï¥Ë°åÈ´òÔºå‰ΩøÊñáÊú¨ÂûÇÁõ¥Â±Ö‰∏≠ */
        }

        /* ‰øÆÊîπÊÑøÊúõÈ°πÊìç‰ΩúÊåâÈíÆ‰ΩçÁΩÆ */
        .wish-item-actions {
            display: flex;
            gap: 8px;
            opacity: 0;
            transition: opacity 0.3s ease;
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(calc(-50% + 15px)); /* Âêë‰∏ãÂπ≥Áßª15px */
            z-index: 2;
        }

        .wish-item:hover .wish-item-actions {
            opacity: 1;
        }

        .wish-item-tag {
            position: relative;
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 10px;
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            border: 1px solid rgba(255, 107, 107, 0.2);
            margin-right: 5px;
            display: inline-block;
            max-width: 80px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .wish-item-tags {
            position: absolute;
            top: 8px;
            right: 8px;
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            max-width: 200px;
            justify-content: flex-end;
            z-index: 1;
        }

        .wish-item-tags .wish-item-tag:nth-child(n+4) {
            display: none;
        }

        .wish-item-tags .wish-item-tag:last-child {
            margin-right: 0;
        }

        /* Ê†áÁ≠æÊ†∑Âºè‰ºòÂåñ */
        .form-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
            position: relative;
        }

        .form-tag {
            padding: 6px 12px;
            background: rgba(255, 107, 107, 0.1);
            color: #ff6b6b;
            border-radius: 15px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 107, 107, 0.2);
            display: flex;
            align-items: center;
            gap: 5px;
            position: relative;
        }

        .form-tag .remove-tag {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(255, 107, 107, 0.2);
            margin-left: 5px;
            font-size: 12px;
            opacity: 0;
            transition: all 0.3s ease;
        }

        .form-tag:hover .remove-tag {
            opacity: 1;
        }

        .form-tag .remove-tag:hover {
            background: rgba(255, 107, 107, 0.4);
        }

        .add-tag-input {
            padding: 6px 12px;
            border: 1px dashed rgba(255, 107, 107, 0.3);
            border-radius: 15px;
            font-size: 13px;
            color: #666;
            background: transparent;
            width: 100px;
            transition: all 0.3s ease;
        }

        .add-tag-input:focus {
            outline: none;
            border-color: #ff6b6b;
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.1);
        }

        /* ÂõæÊ†áÊ†∑Âºè */
        .icon {
            font-size: 16px;
            transition: all 0.3s ease;
        }

        .event-button:hover .icon {
            transform: scale(1.1);
        }

        .edit-icon::before {
            content: '‚úèÔ∏è';
        }

        .delete-icon::before {
            content: 'üóëÔ∏è';
        }

        .pin-icon::before {
            content: 'üìå';
        }

        /* Ê∑ªÂä†ÊãñÊãΩÁõ∏ÂÖ≥Ê†∑Âºè */
        .event-item {
            cursor: move;
        }
        
        .event-item.dragging {
            opacity: 0.5;
            background: rgba(255, 107, 107, 0.1);
        }
        
        .quadrant {
            position: relative;
        }
        
        .quadrant.drag-over {
            border-color: #ff6b6b;
            background-color: rgba(255, 107, 107, 0.1);
        }

        .wish-item {
            cursor: default;
        }

        /* ‰øÆÊîπÂõæÊ†áÊ†∑Âºè */
        .icon {
            display: inline-block;
            width: 20px;
            height: 20px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .edit-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234facfe"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>');
        }

        .delete-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>');
        }

        .pin-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>');
        }

        /* ÂõæÊ†áÂü∫Á°ÄÊ†∑Âºè */
        .icon {
            display: inline-block;
            width: 16px;
            height: 16px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.8;
            transition: all 0.3s ease;
        }

        /* ÁºñËæëÂõæÊ†á */
        .edit-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%234facfe"><path d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"/></svg>');
        }

        /* Âà†Èô§ÂõæÊ†á */
        .delete-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></svg>');
        }

        /* Âõ∫ÂÆöÂõæÊ†á */
        .pin-icon {
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="%23ff6b6b"><path d="M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2z"/></svg>');
        }

        /* ÂõæÊ†áÊÇ¨ÂÅúÊïàÊûú */
        .event-button:hover .icon,
        .task-button:hover .icon {
            opacity: 1;
            transform: scale(1.1);
        }

        /* Âà†Èô§ÈáçÂ§çÁöÑÂõæÊ†áÊ†∑ÂºèÂÆö‰πâ */
        .edit-icon::before,
        .delete-icon::before,
        .pin-icon::before {
            display: none;
        }

        /* Ê∑ªÂä†ÂõæÊ†áÈÄâÊã©Âô®Ê†∑Âºè */
        .icon-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            max-height: 120px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-top: 10px;
        }

        .icon-option {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 8px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 20px;
        }

        .icon-option:hover {
            background: #f0f2f5;
            border-color: #ff6b6b;
        }

        .icon-option.selected {
            background: rgba(255, 107, 107, 0.1);
            border-color: #ff6b6b;
            color: #ff6b6b;
        }

        /* ‰øÆÊîπÊ†áÁ≠æÂÆπÂô®Ê†∑Âºè */
        #formTags {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 6px;
            margin-top: 8px;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            max-height: 100px;
            overflow-y: auto;
        }

        /* ‰øÆÊîπÊ†áÁ≠æÊ†∑Âºè */
        .form-tag {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4px 8px;
            background: #f0f2f5;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 12px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-align: center;
        }

        /* ‰øÆÊîπÊ∑ªÂä†Ê†áÁ≠æËæìÂÖ•Ê°ÜÊ†∑Âºè */
        .add-tag-input {
            grid-column: span 3;
            padding: 4px 8px;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 12px;
            background: white;
            outline: none;
            transition: all 0.3s ease;
            width: 100%;
            box-sizing: border-box;
        }

        .add-tag-input:focus {
            border-color: #ff6b6b;
            box-shadow: 0 0 0 2px rgba(255, 107, 107, 0.1);
        }

        /* ‰øÆÊîπÊªöÂä®Êù°Ê†∑Âºè */
        .icon-selector::-webkit-scrollbar,
        #formTags::-webkit-scrollbar {
            width: 6px;
        }

        .icon-selector::-webkit-scrollbar-track,
        #formTags::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .icon-selector::-webkit-scrollbar-thumb,
        #formTags::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 3px;
        }

        .icon-selector::-webkit-scrollbar-thumb:hover,
        #formTags::-webkit-scrollbar-thumb:hover {
            background: #999;
        }

        /* ‰øÆÊîπÂºπÁ™óÊ†∑Âºè */
        .popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            z-index: 1000;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        /* ‰øÆÊîπË°®ÂçïÁªÑÊ†∑Âºè */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        /* ‰øÆÊîπÂºπÁ™óÂÜÖÂÆπÂå∫ÂüüÊ†∑Âºè */
        .popup-content {
            max-height: calc(80vh - 100px);
            overflow-y: auto;
            padding-right: 10px;
        }

        /* ‰øÆÊîπÂºπÁ™óÊªöÂä®Êù°Ê†∑Âºè */
        .popup-content::-webkit-scrollbar {
            width: 6px;
        }

        .popup-content::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 3px;
        }

        .popup-content::-webkit-scrollbar-thumb {
            background: #ccc;
            border-radius: 3px;
        }

        .popup-content::-webkit-scrollbar-thumb:hover {
            background: #999;
        }

        /* ‰øÆÊîπÊ†áÁ≠æÈÄâ‰∏≠Áä∂ÊÄÅÊ†∑Âºè */
        .form-tag.active {
            background: rgba(255, 107, 107, 0.2);
            border-color: #ff6b6b;
            color: #ff6b6b;
            font-weight: 500;
        }

        /* ‰øÆÊîπÊ†áÁ≠æÊ†∑Âºè */
        .form-tag {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 4px 8px;
            background: #f0f2f5;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 12px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            text-align: center;
        }

        /* ‰øÆÊîπÂà†Èô§Á°ÆËÆ§ÂºπÁ™óÊ†∑Âºè */
        .delete-confirm-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 16px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
            z-index: 1000;
            width: 360px;
            text-align: center;
            animation: popupFadeIn 0.3s ease;
        }

        .delete-confirm-popup .popup-title {
            font-size: 20px;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
        }

        .delete-confirm-popup .popup-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        .delete-confirm-popup .popup-buttons {
            display: flex;
            justify-content: center;
            gap: 16px;
        }

        .delete-confirm-popup .popup-button {
            padding: 10px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            outline: none;
        }

        .delete-confirm-popup .cancel-button {
            background: #f0f2f5;
            color: #666;
        }

        .delete-confirm-popup .cancel-button:hover {
            background: #e0e0e0;
        }

        .delete-confirm-popup .confirm-button {
            background: #ff6b6b;
            color: white;
        }

        .delete-confirm-popup .confirm-button:hover {
            background: #ff5252;
            transform: translateY(-1px);
        }

        @keyframes popupFadeIn {
            from {
                opacity: 0;
                transform: translate(-50%, -48%);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%);
            }
        }

        /* Ê∑ªÂä†ÈÅÆÁΩ©Â±ÇÊ†∑Âºè */
        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
        }

        /* Ê∑ªÂä†‰ªªÂä°Â§çÈÄâÊ°ÜÊ†∑Âºè */
        .task-checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #3498db;
            border-radius: 50%;
            margin-right: 10px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .task-checkbox:hover {
            border-color: #2980b9;
            transform: scale(1.1);
        }

        .task-checkbox.completed {
            background: #3498db;
            border-color: #3498db;
        }

        .task-checkbox.completed::after {
            content: '‚úì';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-size: 12px;
        }

        .task-item.completed {
            background: rgba(52, 152, 219, 0.05);
            border-left: 3px solid #3498db;
        }

        .task-item.completed .task-title {
            text-decoration: line-through;
            color: #95a5a6;
        }

        .task-item.completed .task-description {
            color: #bdc3c7;
        }

        /* Èü≥‰πêÊí≠ÊîæÂô®Ê†∑Âºè */
        .music-player {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .music-controls {
            display: flex;
            gap: 10px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px;
            border-radius: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        .music-button, .upload-button {
            width: 40px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background: #ff6b6b;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 20px;
        }

        .music-button:hover, .upload-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .music-button.playing {
            animation: rotate 3s linear infinite;
        }

        .music-icon, .upload-icon {
            display: inline-block;
            transition: all 0.3s ease;
        }

        @keyframes rotate {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }

        /* Ê∑ªÂä†Èü≥‰πê‰∏ä‰º†ÊåâÈíÆÊ†∑Âºè */
        .music-upload {
            position: relative;
        }

        .upload-button {
            background: #4facfe;
        }

        .upload-button:hover {
            background: #2196f3;
        }

        /* Èü≥‰πêURLËæìÂÖ•Ê°ÜÊ†∑Âºè */
        .music-url {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .url-input {
            width: 200px;
            padding: 8px 12px;
            border: 2px solid #4facfe;
            border-radius: 20px;
            font-size: 14px;
            color: #333;
            background: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
        }

        .url-input:focus {
            outline: none;
            border-color: #2196f3;
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.1);
        }

        .url-button {
            width: 36px;
            height: 36px;
            border: none;
            border-radius: 50%;
            background: #4facfe;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            font-size: 16px;
        }

        .url-button:hover {
            transform: scale(1.1);
            background: #2196f3;
            box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3);
        }

        .url-icon {
            display: inline-block;
            transition: all 0.3s ease;
        }
    </style>
</head>
<body>
    <!-- ÂØºËà™Ê†è -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="zhu ye.html" class="logo">Âêë&Ê∂µÁöÑÂπ∏Á¶èËä±Âõ≠</a>
            <div class="nav-links">
                <a href="ai qing yin ji.html" class="nav-link">Áà±ÊÉÖÂç∞ËÆ∞</a>
                <a href="xing fu shun jian.html" class="nav-link">Âπ∏Á¶èÁû¨Èó¥</a>
                <a href="mei hao shi guang.html" class="nav-link">ÁæéÂ•ΩÊó∂ÂÖâ</a>
            </div>
        </div>
    </nav>

    <!-- Ê†áÈ¢ò -->
    <div class="title-container">
        <h1 class="title">ËÆ∞ÂΩïÁæéÂ•ΩÊó∂ÂÖâ
            <div class="title-line"></div>
        </h1>
    </div>

    <!-- Êó∂Èó¥ÂíåÊ∏©È¶®ËØùËØ≠ -->
    <div class="time-container" id="timeContainer">
        <div class="current-time" id="currentTime"></div>
        <div class="sweet-messages" id="sweetMessages"></div>
    </div>

    <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
    <div class="main-content">
        <!-- ‰∏äÈÉ®ÂàÜÔºöÁ∫™ÂøµÊó•„ÄÅÂπ∏Á¶èÊú™Êù•„ÄÅÂÄíËÆ°Êó∂ -->
        <div class="top-section">
            <!-- Á∫™ÂøµÊó• -->
            <div class="side-container">
                <div class="card memory-container">
                    <h3 class="card-title">Á∫™ÂøµÊó•</h3>
                    <div class="add-button" onclick="showAddForm('memory')">+</div>
                    <div class="memory-list" id="memoryList"></div>
                </div>
            </div>

            <!-- Âπ∏Á¶èÊú™Êù• -->
            <div class="wish-container">
                <div class="wish-header">
                    <div class="wish-header-left">
                        <div class="wish-category-select">
                            <select id="wishCategory" onchange="switchCategory(this)">
                                <option value="food">ÁæéÈ£üÊé¢Á¥¢</option>
                                <option value="travel">ÊóÖË°åËÆ°Âàí</option>
                                <option value="activity">ÊÉ≥ÂÅöÁöÑ‰∫ã</option>
                                <option value="shopping">Ë¥≠Áâ©Ê∏ÖÂçï</option>
                            </select>
                        </div>
                        <div class="wish-title">ÊÑøÊúõÊ∏ÖÂçï</div>
                    </div>
                    <button class="wish-add-button" onclick="showAddForm('wish')">+</button>
                </div>
                <div class="wish-list" id="wishList">
                    <!-- ÊÑøÊúõÂàóË°® -->
                </div>
            </div>

            <!-- ÂÄíËÆ°Êó∂ -->
            <div class="side-container">
                <div class="card countdown-container">
                    <h3 class="card-title">ÂÄíËÆ°Êó∂</h3>
                    <div class="add-button" onclick="showAddForm('countdown')">+</div>
                    <div class="countdown-list" id="countdownList"></div>
                </div>
            </div>
        </div>

        <!-- ‰∏ãÈÉ®ÂàÜÔºöÂõõË±°Èôê -->
        <div class="bottom-section">
            <!-- ÂõõË±°ÈôêËÆ∞‰∫ãÊú¨ -->
            <div class="quadrant-container">
                <div class="quadrant" id="quadrant1">
                    <h3 class="quadrant-title">ÈáçË¶Å‰∏îÁ¥ßÊÄ•</h3>
                    <div class="add-button" onclick="showAddForm(1)">+</div>
                    <div class="task-list"></div>
                </div>
                <div class="quadrant" id="quadrant2">
                    <h3 class="quadrant-title">ÈáçË¶Å‰∏çÁ¥ßÊÄ•</h3>
                    <div class="add-button" onclick="showAddForm(2)">+</div>
                    <div class="task-list"></div>
                </div>
                <div class="quadrant" id="quadrant3">
                    <h3 class="quadrant-title">Á¥ßÊÄ•‰∏çÈáçË¶Å</h3>
                    <div class="add-button" onclick="showAddForm(3)">+</div>
                    <div class="task-list"></div>
                </div>
                <div class="quadrant" id="quadrant4">
                    <h3 class="quadrant-title">‰∏çÁ¥ßÊÄ•‰∏çÈáçË¶Å</h3>
                    <div class="add-button" onclick="showAddForm(4)">+</div>
                    <div class="task-list"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- ÂÖ®Â±èÊó∂Èíü -->
    <div class="fullscreen-clock" id="fullscreenClock">
        <div class="clock-content">
            <div class="clock-time" id="fullscreenTime"></div>
            <div class="clock-date" id="fullscreenDate"></div>
        </div>
        <div class="close-clock" onclick="toggleFullscreenClock()">√ó</div>
    </div>

    <!-- ËÉåÊôØÂä®Áîª -->
    <div class="background-animation" id="backgroundAnimation"></div>

    <!-- Ê∑ªÂä†Ë°®Âçï -->
    <div class="overlay" id="overlay"></div>
    <div class="add-form" id="addForm">
        <h3 class="form-title" id="formTitle">Ê∑ªÂä†‰∫ã‰ª∂</h3>
        <div class="form-group" id="categoryGroup">
            <label class="form-label">ÂàÜÁ±ª</label>
            <select class="form-input" id="eventCategory">
                <option value="food">ÁæéÈ£üÊé¢Á¥¢</option>
                <option value="travel">ÊóÖË°åËÆ°Âàí</option>
                <option value="activity">ÊÉ≥ÂÅöÁöÑ‰∫ã</option>
                <option value="shopping">Ë¥≠Áâ©Ê∏ÖÂçï</option>
            </select>
        </div>
        <div class="form-group">
            <label class="form-label">ÂõæÊ†á</label>
            <div class="icon-selector" id="iconSelector">
                <!-- ÂõæÊ†áÈÄâÈ°πÂ∞ÜÈÄöËøá JavaScript Âä®ÊÄÅÊ∑ªÂä† -->
            </div>
        </div>
        <div class="form-group">
            <label class="form-label">Ê†áÈ¢ò</label>
            <input type="text" class="form-input" id="eventTitle" placeholder="ËØ∑ËæìÂÖ•Ê†áÈ¢ò">
        </div>
        <div class="form-group">
            <label class="form-label">ÊèèËø∞</label>
            <textarea class="form-input" id="eventDescription" placeholder="Ê∑ªÂä†‰∏Ä‰∫õÊèèËø∞..."></textarea>
        </div>
        <div class="form-group" id="dateGroup">
            <label class="form-label">Êó•Êúü</label>
            <div class="cute-date-picker">
                <input type="date" class="form-input" id="eventDate">
            </div>
        </div>
        <div class="form-group" id="tagsGroup">
            <label class="form-label">Ê†áÁ≠æ</label>
            <div class="form-tags" id="formTags">
                <div class="form-tag" onclick="toggleTag(this)">ÁæéÈ£ü</div>
                <div class="form-tag" onclick="toggleTag(this)">ÁÉòÁÑô</div>
                <div class="form-tag" onclick="toggleTag(this)">Á∫¶‰ºö</div>
                <div class="form-tag" onclick="toggleTag(this)">ÊóÖË°å</div>
                <div class="form-tag" onclick="toggleTag(this)">Â≠¶‰π†</div>
                <div class="form-tag" onclick="toggleTag(this)">ÂÅ•Â∫∑</div>
            </div>
        </div>
        <div class="form-actions">
            <button class="form-button cancel" onclick="hideAddForm()">ÂèñÊ∂à</button>
            <button class="form-button submit" onclick="submitEvent()">Á°ÆÂÆö</button>
        </div>
    </div>

    <!-- Âú® body Ê†áÁ≠æÂºÄÂßãÂ§ÑÊ∑ªÂä†Èü≥‰πêÊí≠ÊîæÂô® -->
    <div class="music-player">
        <audio id="bgMusic" loop>
            <source src="default-music.mp3" type="audio/mpeg">
        </audio>
        <div class="music-controls">
            <button class="music-button" id="musicToggle">
                <span class="music-icon">üéµ</span>
            </button>
            <div class="music-upload">
                <input type="file" id="musicUpload" accept="audio/*" style="display: none;">
                <button class="upload-button" onclick="document.getElementById('musicUpload').click()">
                    <span class="upload-icon">üìÅ</span>
                </button>
            </div>
            <div class="music-url">
                <input type="text" id="musicUrl" placeholder="ËæìÂÖ•Èü≥‰πêURL" class="url-input">
                <button class="url-button" onclick="playMusicFromUrl()">
                    <span class="url-icon">üîó</span>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Ê∏©È¶®ËØùËØ≠ÂàóË°®
        const sweetMessages = [
            "‰Ω†ÊòØÊàëÁîüÂëΩ‰∏≠ÊúÄÁæéÁöÑÊÑèÂ§ñ",
            "ÊÑø‰∏é‰Ω†ÂÖ±Â∫¶‰ΩôÁîü",
            "‰Ω†ÁöÑÁ¨ëÂÆπÊòØÊàëÊúÄÂ§ßÁöÑÂπ∏Á¶è",
            "Áà±‰Ω†ÊòØÊàëÂÅöËøáÊúÄÂ•ΩÁöÑ‰∫ã",
            "Êúâ‰Ω†ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÊòØÊÉÖ‰∫∫ËäÇ",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥Áïô‰ΩèÁöÑÂπ∏Ëøê",
            "ÊÑøÊó∂ÂÖâ‰∏çËÄÅÔºåÊàë‰ª¨‰∏çÊï£",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥Êã•Êä±ÁöÑ‰∫∫",
            "Êúâ‰Ω†ÁöÑÂú∞ÊñπÂ∞±ÊòØÂÆ∂",
            "‰Ω†ÊòØÊàëÊúÄÁèçË¥µÁöÑÁ§ºÁâ©",
            "ÊÑø‰∏é‰Ω†Êê∫ÊâãÂà∞ÁôΩÂ§¥",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥ÂÆàÊä§ÁöÑ‰∫∫",
            "Êúâ‰Ω†ÁöÑÊØè‰∏ÄÂ§©ÈÉΩÂæàÁîú",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥ÂàÜ‰∫´ÁöÑ‰∫∫",
            "ÊÑø‰∏é‰Ω†ÂÖ±Â∫¶ÊØè‰∏Ä‰∏™Êó•Âá∫Êó•ËêΩ",
            "‰Ω†ÁöÑÊ∏©ÊüîÊòØÊàëÊúÄÂ§ßÁöÑ‰æùÈù†",
            "Êúâ‰Ω†ÁöÑ‰∏ñÁïåÊâçÂÆåÊï¥",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥ÁèçÊÉúÁöÑ‰∫∫",
            "ÊÑø‰∏é‰Ω†ÂÖ±Â∫¶ÊØè‰∏Ä‰∏™Êò•Â§èÁßãÂÜ¨",
            "‰Ω†ÊòØÊàëÊúÄÊÉ≥Èô™‰º¥ÁöÑ‰∫∫"
        ];

        // Êõ¥Êñ∞ÂΩìÂâçÊó∂Èó¥
        function updateTime() {
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth() + 1;
            const day = now.getDate();
            const hour = now.getHours().toString().padStart(2, '0');
            const minute = now.getMinutes().toString().padStart(2, '0');
            const second = now.getSeconds().toString().padStart(2, '0');
            
            const timeString = `${year}Âπ¥${month}Êúà${day}Êó• ${hour}:${minute}:${second}`;
            document.getElementById('currentTime').textContent = timeString;
            
            if (document.getElementById('fullscreenClock').classList.contains('active')) {
                const fullscreenTime = `${hour}:${minute}:${second}`;
                const fullscreenDate = `${year}Âπ¥${month}Êúà${day}Êó•`;
                document.getElementById('fullscreenTime').textContent = fullscreenTime;
                document.getElementById('fullscreenDate').textContent = fullscreenDate;
            }
        }

        // ÂàáÊç¢ÂÖ®Â±èÊó∂Èíü
        function toggleFullscreenClock() {
            const clock = document.getElementById('fullscreenClock');
            clock.classList.toggle('active');
            updateTime();
        }

        // Êõ¥Êñ∞Ê∏©È¶®ËØùËØ≠
        function updateSweetMessages() {
            const container = document.getElementById('sweetMessages');
            const currentMessage = container.querySelector('.sweet-message');
            
            if (currentMessage) {
                currentMessage.style.animation = 'fadeOut 0.8s ease forwards';
                setTimeout(() => {
                    currentMessage.remove();
                    showNewMessage();
                }, 800);
            } else {
                showNewMessage();
            }
        }

        function showNewMessage() {
            const container = document.getElementById('sweetMessages');
            const message = document.createElement('div');
            message.className = 'sweet-message';
            message.textContent = sweetMessages[Math.floor(Math.random() * sweetMessages.length)];
            container.appendChild(message);
            
            // ‰ΩøÁî® requestAnimationFrame Á°Æ‰øùÂä®ÁîªÊµÅÁïÖ
            requestAnimationFrame(() => {
                message.style.animation = 'fadeIn 1.2s ease forwards';
            });
        }

        // ÂàõÂª∫ËÉåÊôØÂä®Áîª
        function createBackgroundAnimation() {
            const container = document.getElementById('backgroundAnimation');
            for (let i = 0; i < 20; i++) {
                const element = document.createElement('div');
                element.className = 'floating-element';
                element.style.left = Math.random() * 100 + '%';
                element.style.top = Math.random() * 100 + '%';
                element.style.animationDelay = Math.random() * 15 + 's';
                element.style.transform = `scale(${Math.random() * 0.5 + 0.5})`;
                container.appendChild(element);
            }
        }

        // ËÆ°ÁÆóÊó∂Èó¥Â∑Æ
        function calculateTimeDifference(startDate, endDate) {
            const diff = Math.abs(endDate - startDate);
            const years = Math.floor(diff / (1000 * 60 * 60 * 24 * 365));
            const months = Math.floor((diff % (1000 * 60 * 60 * 24 * 365)) / (1000 * 60 * 60 * 24 * 30));
            const days = Math.floor((diff % (1000 * 60 * 60 * 24 * 30)) / (1000 * 60 * 60 * 24));
            
            let result = '';
            if (years > 0) result += `${years}Âπ¥`;
            if (months > 0) result += `${months}‰∏™Êúà`;
            if (days > 0) result += `${days}Â§©`;
            
            return result || '‰ªäÂ§©';
        }

        // ÊãñÊãΩÁä∂ÊÄÅÁÆ°ÁêÜ
        const dragState = {
            isDragging: false,
            sourceQuadrant: null,
            targetQuadrant: null,
            draggedItem: null
        };

        function initDragAndDrop() {
            const quadrants = document.querySelectorAll('.quadrant');
            
            quadrants.forEach(quadrant => {
                const quadrantId = parseInt(quadrant.id.replace('quadrant', ''));
                
                // ‰ºòÂåñÊãñÊãΩËøõÂÖ•‰∫ã‰ª∂
                quadrant.addEventListener('dragenter', (e) => {
                    e.preventDefault();
                    if (dragState.isDragging) {
                        dragState.targetQuadrant = quadrantId;
                        quadrant.classList.add('drag-over');
                        quadrant.style.transform = 'scale(1.02)';
                        // Ê∑ªÂä†ËßÜËßâÂèçÈ¶à
                        quadrant.style.boxShadow = '0 0 20px rgba(52, 152, 219, 0.3)';
                    }
                });
                
                // ‰ºòÂåñÊãñÊãΩÁ¶ªÂºÄ‰∫ã‰ª∂
                quadrant.addEventListener('dragleave', (e) => {
                    e.preventDefault();
                    if (dragState.isDragging) {
                        dragState.targetQuadrant = null;
                        quadrant.classList.remove('drag-over');
                        quadrant.style.transform = '';
                        quadrant.style.boxShadow = '';
                    }
                });
                
                // ‰ºòÂåñÊãñÊãΩÊÇ¨ÂÅú‰∫ã‰ª∂
                quadrant.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    if (dragState.isDragging) {
                        e.dataTransfer.dropEffect = 'move';
                        quadrant.style.transform = 'scale(1.02)';
                        quadrant.style.boxShadow = '0 0 20px rgba(52, 152, 219, 0.3)';
                    }
                });
                
                // ‰ºòÂåñÊîæÁΩÆ‰∫ã‰ª∂
                quadrant.addEventListener('drop', (e) => {
                    e.preventDefault();
                    quadrant.classList.remove('drag-over');
                    quadrant.style.transform = '';
                    quadrant.style.boxShadow = '';
                    
                    if (dragState.isDragging && dragState.sourceQuadrant !== dragState.targetQuadrant) {
                        try {
                            // Ëé∑Âèñ‰ªªÂä°Êï∞ÊçÆ
                            const taskItem = dragState.draggedItem;
                            const title = taskItem.querySelector('.task-title').textContent;
                            const description = taskItem.querySelector('.task-description').textContent;
                            
                            // È™åËØÅÊï∞ÊçÆ
                            if (!title || !description) {
                                throw new Error('‰ªªÂä°Êï∞ÊçÆ‰∏çÂÆåÊï¥');
                            }
                            
                            // Á°Æ‰øùÊ∫êË±°ÈôêÂíåÁõÆÊ†áË±°ÈôêÁöÑÊï∞ÊçÆÂ≠òÂú®
                            if (!quadrantItems[dragState.sourceQuadrant] || !quadrantItems[dragState.targetQuadrant]) {
                                throw new Error('Ë±°ÈôêÊï∞ÊçÆ‰∏çÂ≠òÂú®');
                            }
                            
                            // ‰ªéÊ∫êË±°ÈôêÁßªÈô§
                            const sourceItems = quadrantItems[dragState.sourceQuadrant];
                            const sourceIndex = sourceItems.findIndex(item => item.title === title);
                            
                            if (sourceIndex === -1) {
                                throw new Error('Ê∫ê‰ªªÂä°‰∏çÂ≠òÂú®');
                            }

                            // ÁßªÈô§Ê∫ê‰ªªÂä°
                            const [movedItem] = sourceItems.splice(sourceIndex, 1);
                            
                            // Ê∑ªÂä†Âà∞ÁõÆÊ†áË±°Èôê
                            quadrantItems[dragState.targetQuadrant].push({
                                title: movedItem.title,
                                description: movedItem.description,
                                completed: movedItem.completed || false
                            });
                            
                            // Êõ¥Êñ∞‰∏§‰∏™Ë±°ÈôêÁöÑÊòæÁ§∫
                            updateQuadrantList(dragState.sourceQuadrant);
                            updateQuadrantList(dragState.targetQuadrant);
                            
                            // ‰øùÂ≠òÊï∞ÊçÆ
                            saveData();
                            
                            // Ê∑ªÂä†ÊàêÂäüÊèêÁ§∫
                            showToast('‰ªªÂä°Â∑≤ÊàêÂäüÁßªÂä®Âà∞Êñ∞Ë±°ÈôêÔºÅ');
                        } catch (error) {
                            console.error('ÁßªÂä®‰ªªÂä°Êó∂Âá∫Èîô:', error);
                            showToast('ÁßªÂä®‰ªªÂä°Â§±Ë¥•Ôºö' + error.message);
                            
                            // ÂèëÁîüÈîôËØØÊó∂ÈáçÊñ∞Âä†ËΩΩÊï∞ÊçÆ
                            loadData();
                            for (let i = 1; i <= 4; i++) {
                                updateQuadrantList(i);
                            }
                        }
                    }
                    
                    // ÈáçÁΩÆÊãñÊãΩÁä∂ÊÄÅ
                    resetDragState();
                });
            });
        }

        // ‰ºòÂåñÊãñÊãΩÁä∂ÊÄÅÈáçÁΩÆÂáΩÊï∞
        function resetDragState() {
            // ÁßªÈô§ÊâÄÊúâÊãñÊãΩÁõ∏ÂÖ≥ÁöÑÊ†∑Âºè
            document.querySelectorAll('.quadrant.drag-over').forEach(quadrant => {
                quadrant.classList.remove('drag-over');
                quadrant.style.transform = '';
                quadrant.style.boxShadow = '';
            });
            
            document.querySelectorAll('.task-item.dragging').forEach(item => {
                item.classList.remove('dragging');
                item.style.opacity = '';
                item.style.transform = '';
            });
            
            // ÈáçÁΩÆÁä∂ÊÄÅ
            dragState.isDragging = false;
            dragState.sourceQuadrant = null;
            dragState.targetQuadrant = null;
            dragState.draggedItem = null;
        }

        // ‰ºòÂåñ‰ªªÂä°È°πÊõ¥Êñ∞ÂáΩÊï∞
        function updateQuadrantList(quadrant) {
            const quadrantElement = document.getElementById(`quadrant${quadrant}`);
            if (!quadrantElement) {
                console.error(`Êâæ‰∏çÂà∞Ë±°Èôê ${quadrant} ÁöÑÂÖÉÁ¥†`);
                return;
            }
            
            const list = quadrantElement.querySelector('.task-list');
            if (!list) {
                console.error(`Êâæ‰∏çÂà∞Ë±°Èôê ${quadrant} ÁöÑÂàóË°®ÂÖÉÁ¥†`);
                return;
            }
            
            // Á°Æ‰øùË±°ÈôêÊï∞ÊçÆÂ≠òÂú®
            if (!quadrantItems[quadrant]) {
                console.error(`Ë±°Èôê ${quadrant} ÁöÑÊï∞ÊçÆ‰∏çÂ≠òÂú®`);
                quadrantItems[quadrant] = [];
            }
            
            // Ê∏ÖÁ©∫ÂàóË°®
            list.innerHTML = '';
            
            // Ê∑ªÂä†‰ªªÂä°È°π
            quadrantItems[quadrant].forEach((item, index) => {
                const taskItem = document.createElement('div');
                taskItem.className = `task-item ${item.completed ? 'completed' : ''}`;
                taskItem.draggable = true;
                taskItem.dataset.quadrant = quadrant;
                
                taskItem.innerHTML = `
                    <div class="task-content">
                        <div class="task-header">
                            <div class="task-checkbox ${item.completed ? 'completed' : ''}" onclick="toggleTaskCompletion(${quadrant}, ${index})"></div>
                            <div class="task-title">${item.title}</div>
                        </div>
                        <div class="task-description">${item.description}</div>
                    </div>
                    <div class="task-actions">
                        <button class="task-button edit" onclick="editQuadrantItem(this, ${quadrant})">
                            <span class="icon edit-icon"></span>
                        </button>
                        <button class="task-button delete" onclick="deleteQuadrantItem(this, ${quadrant})">
                            <span class="icon delete-icon"></span>
                        </button>
                    </div>
                `;
                
                // Ê∑ªÂä†ÊãñÊãΩ‰∫ã‰ª∂
                taskItem.addEventListener('dragstart', (e) => {
                    dragState.isDragging = true;
                    dragState.sourceQuadrant = parseInt(taskItem.dataset.quadrant);
                    dragState.draggedItem = taskItem;
                    taskItem.classList.add('dragging');
                    e.dataTransfer.effectAllowed = 'move';
                    // Ê∑ªÂä†ËßÜËßâÂèçÈ¶à
                    taskItem.style.opacity = '0.5';
                    taskItem.style.transform = 'scale(0.95)';
                    // ËÆæÁΩÆÊãñÊãΩÊï∞ÊçÆ
                    e.dataTransfer.setData('text/plain', JSON.stringify({
                        title: item.title,
                        description: item.description,
                        completed: item.completed
                    }));
                });
                
                taskItem.addEventListener('dragend', () => {
                    resetDragState();
                });
                
                list.appendChild(taskItem);
            });
        }

        // Ê∑ªÂä†ÊèêÁ§∫Ê°ÜÂäüËÉΩ
        function showToast(message) {
            const toast = document.createElement('div');
            toast.className = 'toast';
            toast.textContent = message;
            document.body.appendChild(toast);
            
            // Ê∑ªÂä†Ê†∑Âºè
            toast.style.position = 'fixed';
            toast.style.bottom = '20px';
            toast.style.left = '50%';
            toast.style.transform = 'translateX(-50%)';
            toast.style.backgroundColor = 'rgba(255, 107, 107, 0.9)';
            toast.style.color = 'white';
            toast.style.padding = '10px 20px';
            toast.style.borderRadius = '20px';
            toast.style.zIndex = '2000';
            toast.style.animation = 'fadeInOut 2s ease-in-out';
            
            // Ê∑ªÂä†Âä®ÁîªÊ†∑Âºè
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0% { opacity: 0; transform: translate(-50%, 20px); }
                    15% { opacity: 1; transform: translate(-50%, 0); }
                    85% { opacity: 1; transform: translate(-50%, 0); }
                    100% { opacity: 0; transform: translate(-50%, -20px); }
                }
            `;
            document.head.appendChild(style);
            
            // 2ÁßíÂêéÁßªÈô§ÊèêÁ§∫Ê°Ü
            setTimeout(() => {
                toast.remove();
                style.remove();
            }, 2000);
        }

        // ÂÖ®Â±ÄÂèòÈáè
        let currentCategory = 'food';
        const categoryIcons = {
            food: 'üçΩÔ∏è',
            travel: '‚úàÔ∏è',
            activity: 'üéØ',
            shopping: 'üõçÔ∏è'
        };

        // ÂÖ®Â±ÄÊ†áÁ≠æÂ≠òÂÇ®
        let globalTags = {
            food: ['ÁæéÈ£ü', 'ÁÉòÁÑô', 'Á∫¶‰ºö', 'ÁîúÁÇπ', 'È•ÆÂìÅ'],
            travel: ['ÊóÖË°å', 'ËúúÊúà', 'Â∫¶ÂÅá', 'ÊôØÁÇπ', 'ÈÖíÂ∫ó'],
            activity: ['Â≠¶‰π†', 'Èü≥‰πê', 'ÈòÖËØª', 'ÂÅ•Â∫∑', 'ËøêÂä®'],
            shopping: ['ÊúçË£Ö', 'Êï∞Á†Å', 'ÂÆ∂Â±Ö', 'ÁæéÂ¶Ü', 'ÈÖçÈ•∞']
        };

        // ÂàùÂßãÂåñÊï∞ÊçÆ
        let wishItems = {
            food: [
                { icon: 'üçú', title: 'Â∞ùËØïÊñ∞ÂºÄÁöÑÊó•ÊñôÂ∫ó', description: 'Âê¨ËØ¥‰ªñ‰ª¨ÂÆ∂ÁöÑÂà∫Ë∫´ÂæàÊñ∞È≤ú', tags: ['ÁæéÈ£ü'] },
                { icon: 'üç∞', title: 'Â≠¶‰π†Âà∂‰ΩúÊèêÊãâÁ±≥Ëãè', description: 'Âë®Êú´ÂèØ‰ª•‰∏ÄËµ∑ÂÅöÁîúÁÇπ', tags: ['ÁÉòÁÑô'] }
            ],
            travel: [
                { icon: 'üèñÔ∏è', title: 'ÂéªÈ©¨Â∞î‰ª£Â§´Â∫¶ËúúÊúà', description: 'ËÆ°ÂàíÊòéÂπ¥Â§èÂ§©', tags: ['ËúúÊúà'] }
            ],
            activity: [
                { icon: 'üé®', title: '‰∏ÄËµ∑Â≠¶‰π†ÁîªÁîª', description: 'Âë®Êú´ÂèØ‰ª•ÂèÇÂä†ÁªòÁîªËØæÁ®ã', tags: ['Â≠¶‰π†'] }
            ],
            shopping: [
                { icon: 'üëó', title: '‰π∞ÊÉÖ‰æ£Ë£Ö', description: 'ÊÉ≥Ë¶Å‰∏ÄÂ•óÂèØÁà±ÁöÑÊÉÖ‰æ£Ë£Ö', tags: ['ÊúçË£Ö'] }
            ]
        };

        let memoryItems = [];
        let countdownItems = [];
        let quadrantItems = {
            1: [], // ÈáçË¶Å‰∏îÁ¥ßÊÄ•
            2: [], // ÈáçË¶Å‰∏çÁ¥ßÊÄ•
            3: [], // Á¥ßÊÄ•‰∏çÈáçË¶Å
            4: []  // ‰∏çÁ¥ßÊÄ•‰∏çÈáçË¶Å
        };

        // ‰ªé localStorage Âä†ËΩΩÊï∞ÊçÆ
        function loadData() {
            try {
            // Âä†ËΩΩÊÑøÊúõÊ∏ÖÂçïÊï∞ÊçÆ
            const savedWishItems = localStorage.getItem('wishItems');
            if (savedWishItems) {
                wishItems = JSON.parse(savedWishItems);
            }

            // Âä†ËΩΩÁ∫™ÂøµÊó•Êï∞ÊçÆ
            const savedMemoryItems = localStorage.getItem('memoryItems');
            if (savedMemoryItems) {
                memoryItems = JSON.parse(savedMemoryItems);
            }

            // Âä†ËΩΩÂÄíËÆ°Êó∂Êï∞ÊçÆ
            const savedCountdownItems = localStorage.getItem('countdownItems');
            if (savedCountdownItems) {
                countdownItems = JSON.parse(savedCountdownItems);
            }

            // Âä†ËΩΩÂõõË±°ÈôêÊï∞ÊçÆ
            const savedQuadrantItems = localStorage.getItem('quadrantItems');
            if (savedQuadrantItems) {
                    const parsedItems = JSON.parse(savedQuadrantItems);
                    // Á°Æ‰øùÊâÄÊúâË±°ÈôêÈÉΩÂ≠òÂú®
                    quadrantItems = {
                        1: Array.isArray(parsedItems[1]) ? parsedItems[1] : [],
                        2: Array.isArray(parsedItems[2]) ? parsedItems[2] : [],
                        3: Array.isArray(parsedItems[3]) ? parsedItems[3] : [],
                        4: Array.isArray(parsedItems[4]) ? parsedItems[4] : []
                    };
            }

            // Âä†ËΩΩÊ†áÁ≠æÊï∞ÊçÆ
            const savedGlobalTags = localStorage.getItem('globalTags');
            if (savedGlobalTags) {
                globalTags = JSON.parse(savedGlobalTags);
                }

                console.log('Âä†ËΩΩÁöÑÊï∞ÊçÆ:', { wishItems, memoryItems, countdownItems, quadrantItems });
            } catch (error) {
                console.error('Âä†ËΩΩÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                resetToDefaultData();
            }
        }

        // ‰øùÂ≠òÊï∞ÊçÆÂà∞ localStorage
        function saveData() {
            try {
            localStorage.setItem('wishItems', JSON.stringify(wishItems));
            localStorage.setItem('memoryItems', JSON.stringify(memoryItems));
            localStorage.setItem('countdownItems', JSON.stringify(countdownItems));
            localStorage.setItem('quadrantItems', JSON.stringify(quadrantItems));
            localStorage.setItem('globalTags', JSON.stringify(globalTags));
                console.log('‰øùÂ≠òÁöÑÊï∞ÊçÆ:', { wishItems, memoryItems, countdownItems, quadrantItems });
            } catch (error) {
                console.error('‰øùÂ≠òÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                showToast('‰øùÂ≠òÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•ÊµèËßàÂô®Â≠òÂÇ®Á©∫Èó¥');
            }
        }

        function showAddForm(type) {
            const form = document.getElementById('addForm');
            const overlay = document.getElementById('overlay');
            const categoryGroup = document.getElementById('categoryGroup');
            const dateGroup = document.getElementById('dateGroup');
            const tagsGroup = document.getElementById('tagsGroup');
            const iconSelector = document.querySelector('.icon-selector');
            
            // Â¶ÇÊûúÊòØÁºñËæëÊ®°ÂºèÔºå‰∏çÈáçÁΩÆË°®ÂçïÊï∞ÊçÆ
            if (!form.dataset.editMode) {
                // ÈáçÁΩÆË°®Âçï
                document.getElementById('eventTitle').value = '';
                document.getElementById('eventDescription').value = '';
                document.getElementById('eventDate').value = '';
                document.querySelectorAll('.form-tag').forEach(tag => tag.classList.remove('active'));
                document.querySelectorAll('.icon-option').forEach(option => option.classList.remove('selected'));
            }
            
            // Ê†πÊçÆÁ±ªÂûãËÆæÁΩÆË°®ÂçïÊ†áÈ¢òÂíåÊòæÁ§∫ÂÜÖÂÆπ
            switch(type) {
                case 'wish':
                    document.getElementById('formTitle').textContent = form.dataset.editMode ? 'ÁºñËæëÊÑøÊúõ' : 'Ê∑ªÂä†ÊÑøÊúõ';
                    document.getElementById('eventCategory').value = currentCategory;
                    categoryGroup.style.display = 'block';
                    dateGroup.style.display = 'none';
                    tagsGroup.style.display = 'block';
                    iconSelector.parentElement.style.display = 'block';
                    updateTagList();
                    initIconSelector();
                    break;
                case 'memory':
                    document.getElementById('formTitle').textContent = 'Ê∑ªÂä†Á∫™ÂøµÊó•';
                    categoryGroup.style.display = 'none';
                    dateGroup.style.display = 'block';
                    tagsGroup.style.display = 'none';
                    break;
                case 'countdown':
                    document.getElementById('formTitle').textContent = 'Ê∑ªÂä†ÂÄíËÆ°Êó∂';
                    categoryGroup.style.display = 'none';
                    dateGroup.style.display = 'block';
                    tagsGroup.style.display = 'none';
                    break;
                default:
                    // ÂõõË±°Èôê
                    document.getElementById('formTitle').textContent = `Ê∑ªÂä†‰ªªÂä° - Á¨¨${type}Ë±°Èôê`;
                    categoryGroup.style.display = 'none';
                    dateGroup.style.display = 'none';
                    tagsGroup.style.display = 'none';
                    // Â≠òÂÇ®ÂΩìÂâçË±°ÈôêÁºñÂè∑
                    form.dataset.quadrant = type;
            }
            
            form.style.display = 'block';
            overlay.style.display = 'block';
        }

        function hideAddForm() {
            const form = document.getElementById('addForm');
            const overlay = document.getElementById('overlay');
            
            if (form) {
                form.style.display = 'none';
                // Ê∏ÖÁ©∫Ë°®Âçï
                document.getElementById('eventTitle').value = '';
                document.getElementById('eventDescription').value = '';
                document.getElementById('eventDate').value = '';
                document.querySelectorAll('.form-tag').forEach(tag => tag.classList.remove('active'));
                document.querySelectorAll('.icon-option').forEach(option => option.classList.remove('selected'));
                
                // Ê∏ÖÈô§ÁºñËæëÊ®°ÂºèÊ†áËÆ∞
                delete form.dataset.editMode;
                delete form.dataset.itemIndex;
                delete form.dataset.category;
                delete form.dataset.selectedIcon;
                delete form.dataset.quadrant;
                delete form.dataset.completed;
            }
            
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        // ‰øÆÊîπË°®ÂçïÊèê‰∫§ÂáΩÊï∞
        function submitEvent() {
            const form = document.getElementById('addForm');
            const formTitle = document.getElementById('formTitle').textContent;
            const title = document.getElementById('eventTitle').value.trim();
            const description = document.getElementById('eventDescription').value.trim();
            
            // Â§ÑÁêÜÁºñËæëÊ®°Âºè
            if (form.dataset.editMode === 'true') {
                if (formTitle === 'ÁºñËæëÁ∫™ÂøµÊó•') {
                    const index = parseInt(form.dataset.itemIndex);
                    const date = document.getElementById('eventDate').value;
                    
                    if (!date) {
                        showToast('ËØ∑ÈÄâÊã©Êó•Êúü');
                        return;
                    }

                    // Êõ¥Êñ∞Á∫™ÂøµÊó•
                    memoryItems[index] = {
                        title: title,
                        description: description,
                        date: date
                    };
                    
                    // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                    saveData();
                    updateMemoryList();
                    showToast('Á∫™ÂøµÊó•‰øÆÊîπÊàêÂäüÔºÅ');
                    hideAddForm();
                    return;
                }
                
                if (formTitle === 'ÁºñËæëÂÄíËÆ°Êó∂') {
                    const index = parseInt(form.dataset.itemIndex);
                    const date = document.getElementById('eventDate').value;
                    
                    if (!date) {
                        showToast('ËØ∑ÈÄâÊã©Êó•Êúü');
                        return;
                    }
                    
                    // Êõ¥Êñ∞ÂÄíËÆ°Êó∂
                    countdownItems[index] = {
                        title: title,
                        description: description,
                        date: date
                    };
                    
                    // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                    saveData();
                    updateCountdownList();
                    showToast('ÂÄíËÆ°Êó∂‰øÆÊîπÊàêÂäüÔºÅ');
                    hideAddForm();
                    return;
                }
                
                if (formTitle === 'ÁºñËæëÊÑøÊúõ') {
                    const category = document.getElementById('eventCategory').value;
                    const index = parseInt(form.dataset.itemIndex);
                    const selectedTags = Array.from(document.querySelectorAll('.form-tag.active'))
                        .map(tag => tag.getAttribute('data-tag'));
                    const selectedIcon = form.dataset.selectedIcon || wishItems[category][index].icon;
                    
                    // Êõ¥Êñ∞ÊÑøÊúõÈ°π
                    wishItems[category][index] = {
                        icon: selectedIcon,
                        title: title,
                        description: description,
                        tags: selectedTags
                    };
                    
                    // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                    saveData();
                    updateWishList();
                    showToast('ÊÑøÊúõ‰øÆÊîπÊàêÂäüÔºÅ');
                    hideAddForm();
                    return;
                }
                
                if (formTitle === 'ÁºñËæë‰ªªÂä°') {
                    const quadrant = form.dataset.quadrant;
                    const index = parseInt(form.dataset.itemIndex);
                    const completed = form.dataset.completed === 'true';
                    
                    // Êõ¥Êñ∞‰ªªÂä°
                    quadrantItems[quadrant][index] = {
                        title: title,
                        description: description,
                        completed: completed
                    };
                    
                    // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                    saveData();
                    updateQuadrantList(quadrant);
                    showToast('‰ªªÂä°‰øÆÊîπÊàêÂäüÔºÅ');
                    hideAddForm();
                    return;
                }
            }
            
            // Â§ÑÁêÜÊ∑ªÂä†Ê®°Âºè
            if (formTitle === 'Ê∑ªÂä†ÊÑøÊúõ') {
                const category = document.getElementById('eventCategory').value;
                const selectedTags = Array.from(document.querySelectorAll('.form-tag.active'))
                    .map(tag => tag.getAttribute('data-tag'));
                const selectedIcon = form.dataset.selectedIcon || categoryIcons[category];
                
                const newItem = {
                    icon: selectedIcon,
                    title: title,
                    description: description,
                    tags: selectedTags
                };

                if (!wishItems[category]) {
                    wishItems[category] = [];
                }
                
                wishItems[category].push(newItem);
                
                // ‰øùÂ≠òÊï∞ÊçÆÂπ∂Êõ¥Êñ∞ÊòæÁ§∫
                saveData();
                updateWishList();
                showToast('ÊÑøÊúõÊ∑ªÂä†ÊàêÂäüÔºÅ');
                hideAddForm();
                return;
            } else if (formTitle === 'Ê∑ªÂä†Á∫™ÂøµÊó•') {
                const date = document.getElementById('eventDate').value;
                if (!date) {
                    showToast('ËØ∑ÈÄâÊã©Êó•Êúü');
                    return;
                }
                
                const newMemory = {
                    title: title,
                    description: description,
                    date: date
                };
                
                memoryItems.push(newMemory);
                saveData();
                updateMemoryList();
                showToast('Á∫™ÂøµÊó•Ê∑ªÂä†ÊàêÂäüÔºÅ');
                hideAddForm();
                return;
            } else if (formTitle === 'Ê∑ªÂä†ÂÄíËÆ°Êó∂') {
                const date = document.getElementById('eventDate').value;
                if (!date) {
                    showToast('ËØ∑ÈÄâÊã©Êó•Êúü');
                    return;
                }
                
                const newCountdown = {
                    title: title,
                    description: description,
                    date: date
                };
                
                countdownItems.push(newCountdown);
                saveData();
                updateCountdownList();
                showToast('ÂÄíËÆ°Êó∂Ê∑ªÂä†ÊàêÂäüÔºÅ');
                hideAddForm();
                return;
            } else if (formTitle.startsWith('Ê∑ªÂä†‰ªªÂä°')) {
                const quadrant = form.dataset.quadrant;
                const newTask = {
                    title: title,
                    description: description,
                    completed: false
                };
                
                if (!quadrantItems[quadrant]) {
                    quadrantItems[quadrant] = [];
                }
                
                quadrantItems[quadrant].push(newTask);
                saveData();
                updateQuadrantList(quadrant);
                showToast('‰ªªÂä°Ê∑ªÂä†ÊàêÂäüÔºÅ');
                hideAddForm();
                return;
            }
        }

        // Êõ¥Êñ∞ÊÑøÊúõÊ∏ÖÂçïÊòæÁ§∫
        function updateWishList() {
            const list = document.getElementById('wishList');
            if (!list) return;
            
            list.innerHTML = '';
            const category = document.getElementById('wishCategory').value;
            const items = wishItems[category] || [];
            
            items.forEach((item, index) => {
                const wishItem = document.createElement('div');
                wishItem.className = 'wish-item';
                wishItem.innerHTML = `
                    <div class="wish-item-content">
                        <div class="wish-item-icon">${item.icon}</div>
                        <div class="wish-item-text">
                            <div class="wish-item-title">${item.title}</div>
                            <div class="wish-item-description">${item.description}</div>
                        </div>
                    </div>
                    <div class="wish-item-actions">
                        <button class="event-button edit" onclick="editWishItem(this, '${category}', ${index})">
                            <span class="icon edit-icon"></span>
                        </button>
                        <button class="event-button delete" onclick="deleteWishItem(this, '${category}', ${index})">
                            <span class="icon delete-icon"></span>
                        </button>
                    </div>
                    <div class="wish-item-tags">
                        ${(item.tags || []).map(tag => `<div class="wish-item-tag">${tag}</div>`).join('')}
                    </div>
                `;
                list.appendChild(wishItem);
            });
        }

        // Êõ¥Êñ∞Á∫™ÂøµÊó•ÂàóË°®
        function updateMemoryList() {
            const list = document.getElementById('memoryList');
            if (!list) return;
            
            list.innerHTML = '';
            memoryItems.forEach((item, index) => {
                const memoryItem = document.createElement('div');
                memoryItem.className = 'event-item';
                const eventDate = new Date(item.date);
                const timeDiff = calculateTimeDifference(eventDate, new Date());
                
                memoryItem.innerHTML = `
                    <div class="event-content">
                        <div class="event-header">
                            <div class="event-title">${item.title}</div>
                            <div class="event-time">${item.date}</div>
                        </div>
                        <div class="event-description">
                            ${item.description}
                            <div class="time-duration memory">Â∑≤ËøáÂéª ${timeDiff}</div>
                        </div>
                    </div>
                    <div class="event-actions">
                        <button class="event-button edit" onclick="editMemoryItem(this)">
                            <span class="icon edit-icon"></span>
                        </button>
                        <button class="event-button delete" onclick="deleteMemoryItem(this)">
                            <span class="icon delete-icon"></span>
                        </button>
                    </div>
                `;
                list.appendChild(memoryItem);
            });
        }

        // Êõ¥Êñ∞ÂÄíËÆ°Êó∂ÂàóË°®
        function updateCountdownList() {
            const list = document.getElementById('countdownList');
            if (!list) return;
            
            list.innerHTML = '';
            countdownItems.forEach((item, index) => {
                const countdownItem = document.createElement('div');
                countdownItem.className = 'event-item';
                const eventDate = new Date(item.date);
                const timeDiff = calculateTimeDifference(new Date(), eventDate);
                
                countdownItem.innerHTML = `
                    <div class="event-content">
                        <div class="event-header">
                            <div class="event-title">${item.title}</div>
                            <div class="event-time">${item.date}</div>
                        </div>
                        <div class="event-description">
                            ${item.description}
                            <div class="time-duration countdown">ËøòÊúâ ${timeDiff}</div>
                        </div>
                    </div>
                    <div class="event-actions">
                        <button class="event-button edit" onclick="editCountdownItem(this)">
                            <span class="icon edit-icon"></span>
                        </button>
                        <button class="event-button delete" onclick="deleteCountdownItem(this)">
                            <span class="icon delete-icon"></span>
                        </button>
                    </div>
                `;
                list.appendChild(countdownItem);
            });
        }

        // ÂàáÊç¢ÊÑøÊúõÊ∏ÖÂçïÂàÜÁ±ª
        function switchCategory(select) {
            currentCategory = select.value;
            updateWishList();
            updateTagList();
            // Êõ¥Êñ∞ÂõæÊ†áÈÄâÊã©Âô®
            initIconSelector();
        }

        // È°µÈù¢Âä†ËΩΩÊó∂ÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', () => {
            createBackgroundAnimation();
            updateTime();
            showNewMessage();
            
            // Ê∑ªÂä†Êó∂Èó¥ÂÆπÂô®ÁÇπÂáª‰∫ã‰ª∂
            const timeContainer = document.getElementById('timeContainer');
            if (timeContainer) {
                timeContainer.addEventListener('click', toggleFullscreenClock);
            }
            
            // ÂàùÂßãÂåñÊï∞ÊçÆ
            loadData();
            
            // Á°Æ‰øùÂõõË±°ÈôêÊï∞ÊçÆÂ≠òÂú®
            if (!quadrantItems) {
                quadrantItems = {
                    1: [], // ÈáçË¶Å‰∏îÁ¥ßÊÄ•
                    2: [], // ÈáçË¶Å‰∏çÁ¥ßÊÄ•
                    3: [], // Á¥ßÊÄ•‰∏çÈáçË¶Å
                    4: []  // ‰∏çÁ¥ßÊÄ•‰∏çÈáçË¶Å
                };
            }
            
            // Êõ¥Êñ∞ÊâÄÊúâË±°ÈôêÁöÑÊòæÁ§∫
            for (let i = 1; i <= 4; i++) {
                updateQuadrantList(i);
            }
            
            // Êõ¥Êñ∞ÂÖ∂‰ªñÊ®°ÂùóÁöÑÊòæÁ§∫
            updateWishList();
            updateMemoryList();
            updateCountdownList();
            
            initDragAndDrop();
            
            // ÊØèÁßíÊõ¥Êñ∞Êó∂Èó¥
            setInterval(updateTime, 1000);
            
            // ÊØè10ÁßíÊõ¥Êñ∞Ê∏©È¶®ËØùËØ≠
            setInterval(updateSweetMessages, 10000);
            
            // ÊØèÂàÜÈíüÊõ¥Êñ∞Êó∂Èó¥Â∑Æ
            setInterval(() => {
                updateMemoryList();
                updateCountdownList();
            }, 60000);
            
            // ÂàùÂßãÂåñÊ†áÁ≠æÂàóË°®
            updateTagList();
            
            // ÁõëÂê¨ÂàÜÁ±ªÈÄâÊã©ÂèòÂåñ
            document.getElementById('eventCategory').addEventListener('change', function() {
                updateTagList();
                initIconSelector(); // Êõ¥Êñ∞ÂõæÊ†áÈÄâÊã©Âô®
            });

            initMusicPlayer();
        });

        // Ê∑ªÂä†ÁºñËæëÂíåÂà†Èô§ÂäüËÉΩ
        function editQuadrantItem(button, quadrant) {
            const taskItem = button.closest('.task-item');
            const title = taskItem.querySelector('.task-title').textContent;
            const description = taskItem.querySelector('.task-description').textContent;
            const completed = taskItem.classList.contains('completed');
            
            // ÊòæÁ§∫ÁºñËæëË°®Âçï
            const form = document.getElementById('addForm');
            form.dataset.editMode = 'true';
            form.dataset.quadrant = quadrant;
            form.dataset.itemIndex = Array.from(taskItem.parentNode.children).indexOf(taskItem);
            form.dataset.completed = completed;
            
            document.getElementById('formTitle').textContent = 'ÁºñËæë‰ªªÂä°';
            document.getElementById('eventTitle').value = title;
            document.getElementById('eventDescription').value = description;
            
            // ÈöêËóè‰∏çÈúÄË¶ÅÁöÑË°®ÂçïÂÖÉÁ¥†
            document.getElementById('categoryGroup').style.display = 'none';
            document.getElementById('dateGroup').style.display = 'none';
            document.getElementById('tagsGroup').style.display = 'none';
            
            showAddForm(quadrant);
        }

        function deleteQuadrantItem(button, quadrant) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™‰ªªÂä°ÂêóÔºü')) {
                const taskItem = button.closest('.task-item');
                const index = Array.from(taskItem.parentNode.children).indexOf(taskItem);
                
                quadrantItems[quadrant].splice(index, 1);
                updateQuadrantList(quadrant);
                saveData();
                showToast('‰ªªÂä°Â∑≤Âà†Èô§');
            }
        }

        function editMemoryItem(button) {
            const eventItem = button.closest('.event-item');
            const title = eventItem.querySelector('.event-title').textContent;
            const description = eventItem.querySelector('.event-description').textContent.split('Â∑≤ËøáÂéª')[0].trim();
            const date = eventItem.querySelector('.event-time').textContent;
            
            // ÊòæÁ§∫ÁºñËæëË°®Âçï
            const form = document.getElementById('addForm');
            form.dataset.editMode = 'true';
            form.dataset.itemIndex = Array.from(eventItem.parentNode.children).indexOf(eventItem);
            
            // ËÆæÁΩÆË°®ÂçïÂÜÖÂÆπ
            document.getElementById('formTitle').textContent = 'ÁºñËæëÁ∫™ÂøµÊó•';
            document.getElementById('eventTitle').value = title;
            document.getElementById('eventDescription').value = description;
            document.getElementById('eventDate').value = date;
            
            // ÊòæÁ§∫ÈúÄË¶ÅÁöÑË°®ÂçïÂÖÉÁ¥†
            document.getElementById('categoryGroup').style.display = 'none';
            document.getElementById('dateGroup').style.display = 'block';
            document.getElementById('tagsGroup').style.display = 'none';
            
            // ÊòæÁ§∫Ë°®Âçï
            form.style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function deleteMemoryItem(button) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™Á∫™ÂøµÊó•ÂêóÔºü')) {
                const eventItem = button.closest('.event-item');
                const index = Array.from(eventItem.parentNode.children).indexOf(eventItem);
                
                memoryItems.splice(index, 1);
                updateMemoryList();
                saveData();
                showToast('Á∫™ÂøµÊó•Â∑≤Âà†Èô§');
            }
        }

        function editCountdownItem(button) {
            const eventItem = button.closest('.event-item');
            const title = eventItem.querySelector('.event-title').textContent;
            const description = eventItem.querySelector('.event-description').textContent.split('ËøòÊúâ')[0].trim();
            const date = eventItem.querySelector('.event-time').textContent;
            
            // ÊòæÁ§∫ÁºñËæëË°®Âçï
            const form = document.getElementById('addForm');
            form.dataset.editMode = 'true';
            form.dataset.itemIndex = Array.from(eventItem.parentNode.children).indexOf(eventItem);
            
            // ËÆæÁΩÆË°®ÂçïÂÜÖÂÆπ
            document.getElementById('formTitle').textContent = 'ÁºñËæëÂÄíËÆ°Êó∂';
            document.getElementById('eventTitle').value = title;
            document.getElementById('eventDescription').value = description;
            document.getElementById('eventDate').value = date;
            
            // ÊòæÁ§∫ÈúÄË¶ÅÁöÑË°®ÂçïÂÖÉÁ¥†
            document.getElementById('categoryGroup').style.display = 'none';
            document.getElementById('dateGroup').style.display = 'block';
            document.getElementById('tagsGroup').style.display = 'none';
            
            // ÊòæÁ§∫Ë°®Âçï
            form.style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function deleteCountdownItem(button) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÂÄíËÆ°Êó∂ÂêóÔºü')) {
                const eventItem = button.closest('.event-item');
                const index = Array.from(eventItem.parentNode.children).indexOf(eventItem);
                
                countdownItems.splice(index, 1);
                updateCountdownList();
                saveData();
                showToast('ÂÄíËÆ°Êó∂Â∑≤Âà†Èô§');
            }
        }

        function editWishItem(button, category, index) {
            const item = wishItems[category][index];
            
            // ÊòæÁ§∫ÁºñËæëË°®Âçï
            const form = document.getElementById('addForm');
            form.dataset.editMode = 'true';
            form.dataset.category = category;
            form.dataset.itemIndex = index;
            
            document.getElementById('formTitle').textContent = 'ÁºñËæëÊÑøÊúõ';
            document.getElementById('eventTitle').value = item.title;
            document.getElementById('eventDescription').value = item.description;
            document.getElementById('eventCategory').value = category;
            
            // ÊòæÁ§∫ÈúÄË¶ÅÁöÑË°®ÂçïÂÖÉÁ¥†
            document.getElementById('categoryGroup').style.display = 'block';
            document.getElementById('dateGroup').style.display = 'none';
            document.getElementById('tagsGroup').style.display = 'block';
            
            // Êõ¥Êñ∞Ê†áÁ≠æÂàóË°®
            updateTagList();
            
            // ËÆæÁΩÆÊ†áÁ≠æÈÄâ‰∏≠Áä∂ÊÄÅ
            document.querySelectorAll('.form-tag').forEach(tag => {
                const tagValue = tag.getAttribute('data-tag');
                if (item.tags && item.tags.includes(tagValue)) {
                    tag.classList.add('active');
                }
            });
            
            // ÂàùÂßãÂåñÂõæÊ†áÈÄâÊã©Âô®Âπ∂ÈÄâ‰∏≠ÂΩìÂâçÂõæÊ†á
            initIconSelector();
            selectIcon(item.icon);
            
            // ÊòæÁ§∫Ë°®Âçï
            form.style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        // ‰øÆÊîπÂà†Èô§ÊÑøÊúõÈ°πÂáΩÊï∞
        function deleteWishItem(button, category, index) {
            // ÂàõÂª∫ÈÅÆÁΩ©Â±Ç
            const overlay = document.createElement('div');
            overlay.className = 'overlay';
            document.body.appendChild(overlay);

            // ÂàõÂª∫Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó
            const popup = document.createElement('div');
            popup.className = 'delete-confirm-popup';
            popup.innerHTML = `
                <div class="popup-title">Á°ÆËÆ§Âà†Èô§</div>
                <div class="popup-message">Á°ÆÂÆöË¶ÅÂà†Èô§Ëøô‰∏™ÊÑøÊúõÂêóÔºüÂà†Èô§ÂêéÂ∞ÜÊó†Ê≥ïÊÅ¢Â§ç„ÄÇ</div>
                <div class="popup-buttons">
                    <button class="popup-button cancel-button" onclick="closeDeletePopup()">ÂèñÊ∂à</button>
                    <button class="popup-button confirm-button" onclick="confirmDeleteWishItem('${category}', ${index})">Á°ÆËÆ§Âà†Èô§</button>
                </div>
            `;
            document.body.appendChild(popup);
        }

        // Ê∑ªÂä†ÂÖ≥Èó≠Âà†Èô§ÂºπÁ™óÂáΩÊï∞
        function closeDeletePopup() {
            const popup = document.querySelector('.delete-confirm-popup');
            const overlay = document.querySelector('.overlay');
            if (popup) popup.remove();
            if (overlay) overlay.remove();
        }

        // Ê∑ªÂä†Á°ÆËÆ§Âà†Èô§ÂáΩÊï∞
        function confirmDeleteWishItem(category, index) {
            if (wishItems[category] && wishItems[category][index]) {
                wishItems[category].splice(index, 1);
                updateWishList();
                saveData();
                showToast('ÊÑøÊúõÂ∑≤Âà†Èô§');
            }
            closeDeletePopup();
        }

        // Ê∑ªÂä†‰ªªÂä°ÂÆåÊàêÁä∂ÊÄÅÂàáÊç¢ÂáΩÊï∞
        function toggleTaskCompletion(quadrant, index) {
            try {
                const taskItem = document.querySelector(`#quadrant${quadrant} .task-list`).children[index];
                const checkbox = taskItem.querySelector('.task-checkbox');
                
                // Á´ãÂç≥Êõ¥Êñ∞ËßÜËßâÂèçÈ¶à
                checkbox.classList.toggle('completed');
                taskItem.classList.toggle('completed');
                
                // Êõ¥Êñ∞Êï∞ÊçÆÁä∂ÊÄÅ
                quadrantItems[quadrant][index].completed = !quadrantItems[quadrant][index].completed;
                
                if (quadrantItems[quadrant][index].completed) {
                    // ËÆ°ÁÆóÁßªÂä®Ë∑ùÁ¶ª
                    const remainingTasks = Array.from(taskItem.parentNode.children).slice(index + 1);
                    const moveDistance = remainingTasks.reduce((total, task) => {
                        return total + (task.offsetHeight + 8); // 8pxÊòØmargin-bottom
                    }, 0);
                    
                    // ËÆæÁΩÆÁßªÂä®Âä®Áîª
                    taskItem.style.setProperty('--move-distance', `${moveDistance}px`);
                    taskItem.classList.add('moving');
                    
                    // ‰ΩøÁî® requestAnimationFrame ‰ºòÂåñÂä®ÁîªÊÄßËÉΩ
                    requestAnimationFrame(() => {
                        // ÈáçÊñ∞ÊéíÂ∫è‰ªªÂä°
                        const completedTasks = quadrantItems[quadrant].filter(task => task.completed);
                        const uncompletedTasks = quadrantItems[quadrant].filter(task => !task.completed);
                        quadrantItems[quadrant] = [...uncompletedTasks, ...completedTasks];
                        
                        // Âä®ÁîªÁªìÊùüÂêéÊõ¥Êñ∞ÂàóË°®
                        setTimeout(() => {
                updateQuadrantList(quadrant);
                saveData();
                            showToast('‰ªªÂä°Â∑≤ÂÆåÊàêÂπ∂ÁßªËá≥Â∫ïÈÉ®');
                        }, 800);
                    });
                } else {
                    // Êú™ÂÆåÊàêÁä∂ÊÄÅÔºåÁ´ãÂç≥Êõ¥Êñ∞
                    requestAnimationFrame(() => {
                        const completedTasks = quadrantItems[quadrant].filter(task => task.completed);
                        const uncompletedTasks = quadrantItems[quadrant].filter(task => !task.completed);
                        quadrantItems[quadrant] = [...uncompletedTasks, ...completedTasks];
                        updateQuadrantList(quadrant);
                        saveData();
                        showToast('‰ªªÂä°Â∑≤Ê†áËÆ∞‰∏∫Êú™ÂÆåÊàê');
                    });
                }
            } catch (error) {
                console.error('Êõ¥Êñ∞‰ªªÂä°Áä∂ÊÄÅÊó∂Âá∫Èîô:', error);
                showToast('Êõ¥Êñ∞‰ªªÂä°Áä∂ÊÄÅÂ§±Ë¥•');
            }
        }

        // Ê∑ªÂä†Ê†áÁ≠æÁÆ°ÁêÜÁõ∏ÂÖ≥ÂáΩÊï∞
        function toggleTag(tagElement) {
            if (tagElement.classList.contains('editing')) return;
            tagElement.classList.toggle('active');
        }

        function updateTagList() {
            const category = document.getElementById('eventCategory').value;
            const tagsContainer = document.getElementById('formTags');
            
            // Ê∏ÖÁ©∫Áé∞ÊúâÊ†áÁ≠æ
            tagsContainer.innerHTML = '';
            
            // Ê∑ªÂä†Áé∞ÊúâÊ†áÁ≠æ
            globalTags[category].forEach(tag => {
                const tagElement = document.createElement('div');
                tagElement.className = 'form-tag';
                tagElement.setAttribute('data-tag', tag);
                tagElement.textContent = tag;
                tagElement.onclick = function() {
                    toggleTag(this);
                };
                tagsContainer.appendChild(tagElement);
            });
            
            // Ê∑ªÂä†ËæìÂÖ•Ê°Ü
            const addTagInput = document.createElement('input');
            addTagInput.type = 'text';
            addTagInput.className = 'add-tag-input';
            addTagInput.placeholder = 'Ê∑ªÂä†Ê†áÁ≠æ...';
            addTagInput.onkeydown = function(e) {
                if (e.key === 'Enter') {
                    const value = this.value.trim();
                    if (value && !globalTags[category].includes(value)) {
                        globalTags[category].push(value);
                        saveData();
                        updateTagList();
                    }
                    this.value = '';
                }
            };
            tagsContainer.appendChild(addTagInput);
        }

        function removeTag(removeButton) {
            const tagElement = removeButton.parentElement;
            const tag = tagElement.getAttribute('data-tag');
            const category = document.getElementById('eventCategory').value;
            
            // ‰ªéÂÖ®Â±ÄÊ†áÁ≠æÂàóË°®‰∏≠ÁßªÈô§
            const index = globalTags[category].indexOf(tag);
            if (index !== -1) {
                globalTags[category].splice(index, 1);
                saveData(); // ‰øùÂ≠òÂà†Èô§ÂêéÁöÑÊ†áÁ≠æÂàóË°®
            }
            
            tagElement.remove();
        }

        // ‰øÆÊîπÂõæÊ†áÂàóË°®ÂíåÂõæÊ†áÈÄâÊã©Áõ∏ÂÖ≥ÂáΩÊï∞
        const iconList = {
            food: [
                'üçΩÔ∏è', 'üçú', 'üç≤', 'üç±', 'üçõ', 'üçù', 'üçï', 'üçî', 'üçü', 'üå≠', 'üçø', 'üç©', 'üç™', 'üç´', 'üç¨', 'üç≠', 'üçÆ', 'üçØ',
                'üçñ', 'üçó', 'ü•©', 'ü•ì', 'üç≥', 'ü•ö', 'ü•û', 'üßá', 'ü•ì', 'ü•®', 'ü•ñ', 'üßÄ', 'ü•™', 'ü•ô', 'ü•ó', 'ü•ò', 'ü•´', 'üçù',
                'üçú', 'üç≤', 'üçõ', 'üç£', 'üç±', 'ü•ü', 'üç§', 'üçô', 'üçö', 'üçò', 'üç•', 'ü•†', 'üç°', 'üçß', 'üç®', 'üç¶', 'ü•ß', 'üßÅ'
            ],
            travel: [
                '‚úàÔ∏è', 'üöÄ', 'üöÅ', 'üöÇ', 'üö¢', 'üö§', 'üèñÔ∏è', 'üèùÔ∏è', 'üèúÔ∏è', 'üèïÔ∏è', 'üèûÔ∏è', 'üåÖ', 'üåÑ', 'üåá', 'üåÜ', 'üèôÔ∏è', 'üåÉ', 'üåå',
                'üóΩ', 'üóº', 'üóª', 'üè∞', 'üèØ', 'üèüÔ∏è', 'üé°', 'üé¢', 'üé†', '‚õ≤', '‚õ±Ô∏è', 'üèñÔ∏è', 'üèùÔ∏è', 'üèîÔ∏è', '‚õ∞Ô∏è', 'üåã', 'üóª', 'üèïÔ∏è',
                'üèïÔ∏è', '‚õ∫', 'üèîÔ∏è', 'üóª', 'üåã', 'üèñÔ∏è', 'üèùÔ∏è', 'üèúÔ∏è', 'üèïÔ∏è', 'üèûÔ∏è', 'üåÖ', 'üåÑ', 'üåá', 'üåÜ', 'üèôÔ∏è', 'üåÉ', 'üåå', 'üå†'
            ],
            activity: [
                'üéØ', 'üé®', 'üé≠', 'üé™', 'üé¢', 'üé°', 'üé†', 'üé¨', 'üé§', 'üéß', 'üéº', 'üéπ', 'üé∏', 'üéª', 'üé∫', 'üé∑', 'üé≤', 'üéÆ',
                'üèÉ', 'üèÉ‚Äç‚ôÄÔ∏è', 'üèÉ‚Äç‚ôÇÔ∏è', 'üö∂', 'üö∂‚Äç‚ôÄÔ∏è', 'üö∂‚Äç‚ôÇÔ∏è', 'üèãÔ∏è', 'üèãÔ∏è‚Äç‚ôÄÔ∏è', 'üèãÔ∏è‚Äç‚ôÇÔ∏è', 'ü§∏', 'ü§∏‚Äç‚ôÄÔ∏è', 'ü§∏‚Äç‚ôÇÔ∏è', '‚õπÔ∏è', '‚õπÔ∏è‚Äç‚ôÄÔ∏è', '‚õπÔ∏è‚Äç‚ôÇÔ∏è', 'ü§æ', 'ü§æ‚Äç‚ôÄÔ∏è', 'ü§æ‚Äç‚ôÇÔ∏è',
                'üßò', 'üßò‚Äç‚ôÄÔ∏è', 'üßò‚Äç‚ôÇÔ∏è', 'üèÑ', 'üèÑ‚Äç‚ôÄÔ∏è', 'üèÑ‚Äç‚ôÇÔ∏è', 'üèä', 'üèä‚Äç‚ôÄÔ∏è', 'üèä‚Äç‚ôÇÔ∏è', 'ü§Ω', 'ü§Ω‚Äç‚ôÄÔ∏è', 'ü§Ω‚Äç‚ôÇÔ∏è', 'üö£', 'üö£‚Äç‚ôÄÔ∏è', 'üö£‚Äç‚ôÇÔ∏è', 'üèá', 'üèá‚Äç‚ôÄÔ∏è', 'üèá‚Äç‚ôÇÔ∏è'
            ],
            shopping: [
                'üõçÔ∏è', 'üëó', 'üëî', 'üëï', 'üëñ', 'üëö', 'üëõ', 'üëú', 'üíº', 'üëù', 'üéí', 'üëü', 'üë†', 'üë°', 'üë¢', 'üëû', 'üëë', 'üíç',
                'üõí', 'üõçÔ∏è', 'üëó', 'üëî', 'üëï', 'üëñ', 'üëö', 'üëõ', 'üëú', 'üíº', 'üëù', 'üéí', 'üëü', 'üë†', 'üë°', 'üë¢', 'üëû', 'üëë', 'üíç',
                'üíÑ', 'üíã', 'üëÑ', 'üëÖ', 'üëÇ', 'üëÉ', 'üë£', 'üëÅÔ∏è', 'üëÄ', 'üß†', 'ü¶∑', 'ü¶¥', 'üí™', 'ü¶µ', 'ü¶∂', 'üëã', 'ü§ö', 'üñêÔ∏è'
            ]
        };

        function initIconSelector() {
            const iconSelector = document.getElementById('iconSelector');
            const category = document.getElementById('eventCategory').value;
            iconSelector.innerHTML = '';
            
            // Ëé∑ÂèñÂΩìÂâçÂàÜÁ±ªÁöÑÂõæÊ†áÂàóË°®
            const currentIcons = iconList[category] || iconList.food;
            
            currentIcons.forEach(icon => {
                const iconOption = document.createElement('div');
                iconOption.className = 'icon-option';
                iconOption.textContent = icon;
                iconOption.onclick = () => selectIcon(icon);
                iconSelector.appendChild(iconOption);
            });
        }

        function selectIcon(icon) {
            const iconOptions = document.querySelectorAll('.icon-option');
            iconOptions.forEach(option => {
                option.classList.remove('selected');
                if (option.textContent === icon) {
                    option.classList.add('selected');
                }
            });
            
            // Â≠òÂÇ®ÈÄâ‰∏≠ÁöÑÂõæÊ†á
            document.getElementById('addForm').dataset.selectedIcon = icon;
        }

        // ‰øÆÊîπ‰∫ã‰ª∂ÁªëÂÆö
        document.addEventListener('DOMContentLoaded', function() {
            // ÁªëÂÆöË°®ÂçïÊèê‰∫§‰∫ã‰ª∂
            const form = document.getElementById('addForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    submitEvent();
                });
            }
            
            // ÁªëÂÆöÁ°ÆÂÆöÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            const submitButton = document.querySelector('.form-button.submit');
            if (submitButton) {
                submitButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    submitEvent();
                });
            }
            
            // ÁªëÂÆöÂèñÊ∂àÊåâÈíÆÁÇπÂáª‰∫ã‰ª∂
            const cancelButton = document.querySelector('.form-button.cancel');
            if (cancelButton) {
                cancelButton.addEventListener('click', function(e) {
                    e.preventDefault();
                    hideAddForm();
                });
            }
            
            // ÁªëÂÆöÈÅÆÁΩ©Â±ÇÁÇπÂáª‰∫ã‰ª∂
            const overlay = document.getElementById('overlay');
            if (overlay) {
                overlay.addEventListener('click', function(e) {
                    e.preventDefault();
                    hideAddForm();
                });
            }
        });

        // Ê∑ªÂä†Ê∏ÖÈô§Ë°®ÂçïÊï∞ÊçÆÁöÑËæÖÂä©ÂáΩÊï∞
        function clearFormData() {
            const form = document.getElementById('addForm');
            document.getElementById('eventTitle').value = '';
            document.getElementById('eventDescription').value = '';
            document.getElementById('eventDate').value = '';
            document.querySelectorAll('.form-tag').forEach(tag => tag.classList.remove('active'));
            document.querySelectorAll('.icon-option').forEach(option => option.classList.remove('selected'));
            
            // Ê∏ÖÈô§ÁºñËæëÊ®°ÂºèÊ†áËÆ∞
            delete form.dataset.editMode;
            delete form.dataset.itemIndex;
            delete form.dataset.category;
            delete form.dataset.selectedIcon;
            delete form.dataset.quadrant;
            delete form.dataset.completed;
        }

        // Èü≥‰πêÊéßÂà∂Áõ∏ÂÖ≥ÂáΩÊï∞
        function initMusicPlayer() {
            const bgMusic = document.getElementById('bgMusic');
            const musicToggle = document.getElementById('musicToggle');
            const musicUpload = document.getElementById('musicUpload');
            const urlInput = document.getElementById('musicUrl');

            // Ëá™Âä®Êí≠ÊîæÈü≥‰πê
            bgMusic.play().catch(error => {
                console.log('Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢:', error);
                showToast('ÁÇπÂáªÈü≥‰πêÊåâÈíÆÂºÄÂßãÊí≠Êîæ');
            });

            // Èü≥‰πêÊí≠Êîæ/ÊöÇÂÅúÂàáÊç¢
            musicToggle.addEventListener('click', () => {
                if (bgMusic.paused) {
                    bgMusic.play();
                    musicToggle.classList.add('playing');
                } else {
                    bgMusic.pause();
                    musicToggle.classList.remove('playing');
                }
            });

            // Èü≥‰πê‰∏ä‰º†Â§ÑÁêÜ
            musicUpload.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    bgMusic.src = url;
                    bgMusic.play();
                    musicToggle.classList.add('playing');
                    showToast('Èü≥‰πêÂ∑≤Êõ¥Êñ∞');
                }
            });

            // URLËæìÂÖ•Ê°ÜÂõûËΩ¶‰∫ã‰ª∂
            urlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    playMusicFromUrl();
                }
            });

            // ÁõëÂê¨Èü≥‰πêÊí≠ÊîæÁä∂ÊÄÅ
            bgMusic.addEventListener('play', () => {
                musicToggle.classList.add('playing');
            });

            bgMusic.addEventListener('pause', () => {
                musicToggle.classList.remove('playing');
            });

            // ÁõëÂê¨Èü≥‰πêÈîôËØØ
            bgMusic.addEventListener('error', (e) => {
                console.error('Èü≥‰πêÊí≠ÊîæÈîôËØØ:', e);
                showToast('Èü≥‰πêÊí≠ÊîæÂá∫ÈîôÔºåËØ∑Ê£ÄÊü•URLÊàñÊñá‰ª∂');
                musicToggle.classList.remove('playing');
            });
        }

        // Ê∑ªÂä†‰ªéURLÊí≠ÊîæÈü≥‰πêÁöÑÂáΩÊï∞
        function playMusicFromUrl() {
            const urlInput = document.getElementById('musicUrl');
            const url = urlInput.value.trim();
            const bgMusic = document.getElementById('bgMusic');
            const musicToggle = document.getElementById('musicToggle');

            if (!url) {
                showToast('ËØ∑ËæìÂÖ•Èü≥‰πêURL');
                return;
            }

            // È™åËØÅURLÊ†ºÂºè
            try {
                new URL(url);
            } catch (e) {
                showToast('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑURL');
                return;
            }

            // Êõ¥Êñ∞Èü≥‰πêÊ∫êÂπ∂Êí≠Êîæ
            bgMusic.src = url;
            bgMusic.load(); // ÈáçÊñ∞Âä†ËΩΩÈü≥È¢ë

            bgMusic.play().then(() => {
                musicToggle.classList.add('playing');
                showToast('Èü≥‰πêÂºÄÂßãÊí≠Êîæ');
            }).catch(error => {
                console.error('Êí≠ÊîæÈü≥‰πêÂ§±Ë¥•:', error);
                showToast('Êó†Ê≥ïÊí≠ÊîæËØ•Èü≥‰πêÔºåËØ∑Ê£ÄÊü•URLÊòØÂê¶ÊúâÊïà');
            });
        }
    </script>
</body>
</html> 